(()=>{"use strict";var e,t,n={330:e=>{e.exports={rE:"7.0.20"}}},a={};function r(e){var t=a[e];if(void 0!==t)return t.exports;var o=a[e]={exports:{}};return n[e](o,o.exports,r),o.exports}r.m=n,r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce((t,n)=>(r.f[n](e,t),t),[])),r.u=e=>e+"-"+{6:"b9c362720a3efda325aa",230:"7dcefd5a72028182661d",666:"ec40e02d9eab62824638"}[e]+".js",r.miniCssF=e=>e+"-6b3db9a8c29bb99e949e.css",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="netnr:",r.l=(n,a,o,i)=>{if(e[n])e[n].push(a);else{var s,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+o){s=u;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack",t+o),s.src=n),e[n]=[a];var p=(t,a)=>{s.onerror=s.onload=null,clearTimeout(h);var r=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach(e=>e(a)),t)return t(a)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),l&&document.head.appendChild(s)}},r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/",(()=>{if("undefined"!=typeof document){var e=e=>new Promise((t,n)=>{var a=r.miniCssF(e),o=r.p+a;if(((e,t)=>{for(var n=document.getElementsByTagName("link"),a=0;a<n.length;a++){var r=(i=n[a]).getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(r===e||r===t))return i}var o=document.getElementsByTagName("style");for(a=0;a<o.length;a++){var i;if((r=(i=o[a]).getAttribute("data-href"))===e||r===t)return i}})(a,o))return t();((e,t,n,a,o)=>{var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",r.nc&&(i.nonce=r.nc),i.onerror=i.onload=n=>{if(i.onerror=i.onload=null,"load"===n.type)a();else{var r=n&&n.type,s=n&&n.target&&n.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+r+": "+s+")");l.name="ChunkLoadError",l.code="CSS_CHUNK_LOAD_FAILED",l.type=r,l.request=s,i.parentNode&&i.parentNode.removeChild(i),o(l)}},i.href=t,n?n.parentNode.insertBefore(i,n.nextSibling):document.head.appendChild(i)})(e,o,null,t,n)}),t={792:0};r.f.miniCss=(n,a)=>{t[n]?a.push(t[n]):0!==t[n]&&{6:1}[n]&&a.push(t[n]=e(n).then(()=>{t[n]=0},e=>{throw delete t[n],e}))}}})(),(()=>{var e={792:0};r.f.j=(t,n)=>{var a=r.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else{var o=new Promise((n,r)=>a=e[t]=[n,r]);n.push(a[2]=o);var i=r.p+r.u(t),s=new Error;r.l(i,n=>{if(r.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var o=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",s.name="ChunkLoadError",s.type=o,s.request=i,a[1](s)}},"chunk-"+t,t)}};var t=(t,n)=>{var a,o,[i,s,l]=n,c=0;if(i.some(t=>0!==e[t])){for(a in s)r.o(s,a)&&(r.m[a]=s[a]);if(l)l(r)}for(t&&t(n);c<i.length;c++)o=i[c],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0},n=self.webpackChunknetnr=self.webpackChunknetnr||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();let o={init:(e,t,n=document)=>{n.addEventListener("dragover",e=>{t&&t.contains(e.target)||(e.preventDefault(),e.stopPropagation())}),n.addEventListener("drop",async n=>{if(!t||!t.contains(n.target)){n.preventDefault();let t=await o.readDataTransferItems(n.dataTransfer.items);t.length&&await e(t,"drag")}}),t&&t.addEventListener("change",async function(){let t=this.files;t.length&&await e(t,"change")}),document.addEventListener("paste",async function(t){if(!["INPUT","TEXTAREA"].includes(t.target.nodeName)){let n=t.clipboardData.items,a=[];for(let e=0;e<n.length;e++){let t=n[e].getAsFile();t&&a.push(t)}a.length&&await e(a,"paste")}})},readDataTransferItems:async e=>{let t=[],n=[];for(let a=0;a<e.length;a++){let r=e[a],i=r.webkitGetAsEntry();if(null!=i)t.push(o.readDataTransferItemEntry(i));else{let e=r.getAsFile();e&&n.push(e)}}return(await Promise.all(t)).forEach(e=>{e.length?n=n.concat(e):n.push(e)}),n},readDataTransferItemEntry:(e,t)=>new Promise(n=>{if(t=t||"",e.isFile)e.file(e=>{""!=t&&(e.fullPath=t+e.name),n(e)});else if(e.isDirectory){e.createReader().readEntries(a=>{let r=[];for(let n=0;n<a.length;n++)r.push(o.readDataTransferItemEntry(a[n],t+e.name+"/"));Promise.all(r).then(e=>{let t=[];e.forEach(e=>{e.length?t=t.concat(e):t.push(e)}),n(t)})})}}),invokeCanvasToBlob:(e,t,n)=>new Promise(a=>{e.toBlob(e=>{a(e)},t,n)}),invokeImageOnload:(e,t)=>new Promise(n=>{e.onload=()=>n(e),e.src=t}),reader:(e,t="Text",n="utf-8")=>new Promise((a,r)=>{const o=new FileReader;o.onloadend=()=>a(o.result),o.onerror=()=>r(),"Text"==t?o.readAsText(e,n):o[`readAs${t}`](e)})};Object.assign(window,{nrcFile:o});let i={version:r(330).rE,lastFetchDate:null,cookie:function(e,t,n){if(1==arguments.length){let t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?t[2]:null}{let a=`${e}=${t};Path=/`;if(n){let e=new Date;e.setTime(e.getTime()+n),a=`${a};Expires=${e.toGMTString()}`}document.cookie=a}},isDark:()=>document.cookie.includes(".theme=dark"),saveTheme:e=>{let t=new Date;t.setFullYear(t.getFullYear()+1),document.cookie=`.theme=${e};Path=/;Expires=${t.toGMTString()}`},isNullOrWhiteSpace:e=>null==e||""==e.toString().trim(),getFileNameWithoutExtension:e=>{var t=e.split(".");return t.length>1&&t.pop(),t.join(".")},UUID:()=>window.crypto&&window.crypto.randomUUID?crypto.randomUUID():URL.createObjectURL(new Blob([])).split("/").pop(),random:(e=99999,t=0)=>Math.floor(Math.random()*(e-t+1)+t),addSeconds:(e,t)=>(e.setSeconds(e.getSeconds()+t),e),addMinutes:(e,t)=>(e.setMinutes(e.getMinutes()+t),e),addHours:(e,t)=>(e.setHours(e.getHours()+t),e),addDays:(e,t)=>(e.setDate(e.getDate()+t),e),addMonths:(e,t)=>(e.setMonth(e.getMonth()+t),e),addYears:(e,t)=>(e.setFullYear(e.getFullYear()+t),e),type:function(e){return{}.toString.call(e).split(" ")[1].replace("]","")},clone:e=>window.structuredClone?window.structuredClone(e):JSON.parse(JSON.stringify(e)),sleep:e=>new Promise(t=>setTimeout(()=>t(),e||1e3)),trimStart:(e,t)=>{for(e=e.toString().trim();e.startsWith(t);)e=e.substring(t.length);return e},trimEnd:(e,t)=>{for(e=e.toString().trim();e.endsWith(t);)e=e.substring(0,e.length-t.length);return e},error:()=>{throw new Error("Fake Error")},dispatchEvent:(e,t)=>e.dispatchEvent(new Event(t)),cssvar:(e,t,n)=>{if(null==n)return getComputedStyle(e).getPropertyValue(t);e.style.setProperty(t,n)},xssOf:e=>{let t=window.DOMPurify;return t?t.sanitize(e,{ADD_ATTR:["password-toggle","clearable","variant","target"]}):(console.debug("DOMPurify not found"),e)},htmlOf:e=>String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/"/g,"&#x27;").replace(/\//g,"&#x2F;"),htmlEncode:e=>e.replace(/[\u00A0-\u9999<>\&]/g,e=>"&#"+e.charCodeAt(0)+";"),htmlDecode:e=>{let t=document.createElement("div");return t.innerHTML=e,t.innerText},arrayDistinct:e=>Array.from(new Set(e)),groupBy:(e,t)=>Array.from(new Set(e.map(t))),isDanger:e=>/[^a-zA-Z0-9_]+/.test(e),dangerReplace:e=>e.replace(/[^a-zA-Z0-9_]+/g,""),escapeMarkdown:e=>null==e?"":`${e}`.replace(/[\*\_\[\]\#\+\-\!\`\|]/g,"\\$&").replace(/\n/g,"<br>").replace(/\r/g,""),isRiskFile:e=>{let t=!1;if(i.isNullOrWhiteSpace(e)||e.length>250||e.endsWith("."))t=!0;else{let n=e.split("."),a=n.length>1?n.pop().toLowerCase():"";(a.length>10||a.length>1&&"exe,msi,bat,sh,php,php3,asa,asp,aspx,css,htm,html,mhtml,js,jse,jsp,jspx,dll,so,jar,war,ear,ps1,psm1,pl,pm,py,pyc,pyo,rb".includes(a))&&(t=!0)}return t},humpToUnderline:e=>{let t=[];for(let n=0;n<e.length;n++){let a=e[n].toLowerCase(),r=e.charCodeAt(n);r>=65&&r<=90?t.push(`_${a}`):t.push(a)}return t.join("")},byteLength:e=>{let t=0;return Array.from(e).map(function(e){t+=e.charCodeAt(0)>255?2:1}),t},fromCommaToArray:e=>null==e||""==e.trim()?[]:e.split(","),fromKeyToURLParams:e=>{if("Object"==i.type(e))for(const t in e)null!==e[t]&&void 0!==e[t]||(e[t]="");return new URLSearchParams(e).toString()},fromFormToKey:e=>Object.fromEntries(i.fromFormToFormData(e)),fromFormToFormData:e=>{let t=new FormData(e);return e.querySelectorAll("sl-select[multiple]").forEach(e=>{e.name&&t.set(e.name,e.value.join())}),t},fromKeyToFormData:e=>{let t=new FormData;for(const n in e){null!==e[n]&&t.append(n,e[n])}return t},getUrlParams:(e,t)=>new URLSearchParams(t||location.search).get(e),findParentElement:(e,t)=>{let n=e;for(;null!=n;){if(t(n))return n;n=n.parentElement}return null},readDOM:(e,t,n,a)=>{e.querySelectorAll("*").forEach(e=>{if(e.classList.value.startsWith(t)){let r="dom";e.classList[0].substring(t.length+1).split("-").forEach(e=>r+=e.substring(0,1).toUpperCase()+e.substring(1)),1!=a&&r in n||(n[r]=e)}})},editDOM:e=>{e.setAttribute("contenteditable",!0),e.setAttribute("spellcheck",!1)},parserDOM:(e,t)=>(t=t||"text/html",(new DOMParser).parseFromString(e,t)),fetch:async(e,t)=>{let n={resp:null,result:null,error:null};try{t=t||{method:"GET",Cache:"no-cache"};let a=await fetch(e,t);n.resp=a;try{switch(i.lastFetchDate=a.headers.get("date"),null!=i.lastFetchDate&&(i.lastFetchDate=i.formatDateTime("datetime",i.lastFetchDate)),t.type){case"text":n.result=await a.text();break;case"blob":n.result=await a.blob();break;case"buffer":n.result=await a.arrayBuffer();break;case"reader":n.result=a.body.getReader();break;default:n.result=await a.json()}}catch(e){if(a.ok)throw e}}catch(e){n.error=e}return n},tsLoaded:{},importArray:async e=>{let t=[],n={};for(let a=0;a<e.length;a++){let r=e[a];"Promise"==i.type(r)?t.push(r):(t.push(r.promise),n[a]=r.name)}let a=await Promise.all(t);for(let e in n){let t=a[e];"default"in t&&(t=t.default),Object.assign(window,{[n[e]]:t})}return a},importStyle:async e=>{e=i.mirrorNPM(e);let t=i.tsLoaded[e];return t||(i.tsLoaded[e]=t=new Promise(t=>{let n=!1;if(document.querySelectorAll("link").forEach(t=>{t.href&&t.href.includes(e)&&(n=!0)}),n)t();else{let n=document.createElement("LINK");n.href=e,n.rel="stylesheet","onload"in n?n.onload=()=>{t()}:t(),document.head.appendChild(n)}})),t},importScript:async(e,t)=>{e=i.mirrorNPM(e);let n=i.tsLoaded[e];return n||(i.tsLoaded[e]=n=new Promise((n,a)=>{let r,o=document.scripts;for(let t=0;t<o.length;t++){let n=o[t];if(n.src.includes(e)){r=n;break}}if(r)n();else{let r=document.createElement("SCRIPT");r.src=e,r.type=t||"text/javascript",r.onerror=function(e){a(e)},r.onload=function(){n()},document.head.appendChild(r)}})),n},require:(e,t)=>new Promise(n=>{if(t in i.tsLoaded)n();else{let a=t.split(",");e=e.map(e=>i.mirrorNPM(e)),window.require(e,function(){for(let e=0;e<arguments.length;e++)Object.assign(window,{[a[e].trim()]:arguments[e]});i.tsLoaded[t]=!0,n()})}}),mirrorNPM:e=>{let t=/(https?:\/\/[\w.-]+)\/(.*)@([\d.]+)\/(.*)\.(\w+)/.exec(e);return null!=t&&(e=`https://ss.netnr.com/${t[2]}@${t[3]}/${t[4]}.${t[5]}`),e},tsBottomKeepHeight:40,setHeightFromBottom:(e,t)=>{let n=null==t?i.tsBottomKeepHeight:t,a=e.getBoundingClientRect().top+n;Object.assign(e.style,{height:`calc(100vh - ${a}px)`,minHeight:"200px"})},formatByteSize:function(e,t=2,n=1024){if(Math.abs(e)<n)return e+" B";const a=1e3==n?["KB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];let r=-1;const o=10**t;do{e/=n,++r}while(Math.round(Math.abs(e)*o)/o>=n&&r<a.length-1);return(1*e.toFixed(t)).toString()+a[r]},formatDateTime:(e,t)=>{switch(i.type(t)){case"String":case"Number":{let e=new Date(t);isNaN(e)?t.includes("年")&&t.includes("月")&&t.includes("日")&&(e=new Date(t.replace(/年|月/g,"-").replace("日",""))):10==t.length&&e.setHours(0,0,0,0),t=e}break;case"Date":break;default:t=new Date}switch(e=e||"yyyy-MM-dd HH:mm:ss"){case"date":e="yyyy-MM-dd";break;case"time":e="HH:mm:ss";break;case"datetime":e="yyyy-MM-dd HH:mm:ss";break;case"datetime-local":e="yyyy-MM-ddTHH:mm"}return[["yyyy",t.getFullYear()],["MM",t.getMonth()+1],["dd",t.getDate()],["HH",t.getHours()],["mm",t.getMinutes()],["ss",t.getSeconds()],["fff",t.getMilliseconds()]].reduce((e,t)=>e.replace(t[0],`${t[1]}`.padStart(t[0].length,"0")),e)},now:()=>i.formatDateTime("datetime"),downloadBlob:function(e,t){let n=window.URL.createObjectURL(e);i.downloadUrl(n,t)},downloadCanvas:function(e,t,n,a){if(null==n){let e=t.split(".").pop().toLowerCase();"jpg"==e&&(e="jpeg"),n=`image/${e}`}let r;r="image/png"==n?e.toDataURL(n):e.toDataURL(n,a),i.downloadUrl(r,t)},downloadText:function(e,t,n){let a=new Blob([e],{type:n||"text/plain"}),r=window.URL.createObjectURL(a);i.downloadUrl(r,t)},downloadUrl:function(e,t){let n=document.createElement("a");n.href=e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)},performance:()=>{if(window.performance){let e=window.performance.getEntries();for(const t of e)if("PerformanceNavigationTiming"==i.type(t)){console.debug(t);break}}},voice:function(e){if(console.debug(e),"function"==typeof SpeechSynthesisUtterance){let t=new SpeechSynthesisUtterance(e);t.lang="zh-CN",window.speechSynthesis.speak(t)}},notify:async e=>{if("granted"==await Notification.requestPermission())return new Notification(e.title||"消息",e);console.debug(e)},cyrb53:(e,t=0)=>{let n=3735928559^t,a=1103547991^t;for(let t,r=0;r<e.length;r++)t=e.charCodeAt(r),n=Math.imul(n^t,2654435761),a=Math.imul(a^t,1597334677);return n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(a^a>>>13,3266489909),a=Math.imul(a^a>>>16,2246822507),a^=Math.imul(n^n>>>13,3266489909),(4294967296*(2097151&a)+(n>>>0)).toString(36).slice(0,6)},clipboard:async e=>{let t;if(navigator.clipboard)return t=null==e?await navigator.clipboard.readText():await navigator.clipboard.writeText(e),t;if(null!=e){let t=document.createElement("textarea");return t.value=e,t.style.position="fixed",t.style.opacity=0,document.body.appendChild(t),t.select(),window.document.execCommand("Copy"),t.remove(),e}return"不支持 unsupported"}};Object.assign(window,{nrcBase:i});class s{constructor(e={}){this.db=null,this.name=e.name||"localforage",this.storeName=e.storeName||"keyvaluepairs",this.version=e.version||2}init(){return new Promise((e,t)=>{if(this.db)return void e(this);const n=window.indexedDB.open(this.name,this.version);n.onerror=()=>{t(n.error)},n.onupgradeneeded=()=>{const e=n.result;e.objectStoreNames.contains(this.storeName)||e.createObjectStore(this.storeName)},n.onsuccess=()=>{this.db=n.result,e(this)}})}_performTransaction(e,t){return new Promise((n,a)=>{const r=this.db.transaction(this.storeName,e),o=r.objectStore(this.storeName);r.oncomplete=()=>{n()},r.onerror=e=>{a(e.target.error)},t(o,n,a)})}setItem(e,t){return this._performTransaction("readwrite",(n,a,r)=>{const o=n.put(t,e);o.onsuccess=()=>{a()},o.onerror=()=>{r(o.error)}})}getItem(e){return this._performTransaction("readonly",(t,n,a)=>{const r=t.get(e);r.onsuccess=()=>{n(r.result)},r.onerror=()=>{a(r.error)}})}removeItem(e){return this._performTransaction("readwrite",(t,n,a)=>{const r=t.delete(e);r.onsuccess=()=>{n()},r.onerror=()=>{a(r.error)}})}keys(){return this._performTransaction("readonly",(e,t,n)=>{const a=e.getAllKeys();a.onsuccess=()=>{t(a.result)},a.onerror=()=>{n(a.error)}})}clear(){return this._performTransaction("readwrite",(e,t,n)=>{const a=e.clear();a.onsuccess=()=>{t()},a.onerror=()=>{n(a.error)}})}}Object.assign(window,{nrcIndexedDB:s});let l={init:async()=>{null==l.localforage&&(l.localforage=await(new s).init())},localforage:null,getItem:async e=>await l.localforage.getItem(e),setItem:async(e,t)=>await l.localforage.setItem(e,t),removeItem:async e=>await l.localforage.removeItem(e),keys:async()=>await l.localforage.keys(),clear:async()=>await l.localforage.clear(),setCache:async(e,t,n)=>{let a={data:t,flag:n,time:(new Date).toLocaleString().split("/").map(e=>e.padStart(2,"0")).join("-")};await l.localforage.setItem(e,a)},getCache:async(e,t)=>{let n=await l.localforage.getItem(e);if(n){if("function"==typeof t?t(n.flag):n.flag==t)return n.data;await l.localforage.removeItem(e)}}};Object.assign(window,{nrcStorage:l});let c={init:async()=>{Element.prototype.getAnimations||(Element.prototype.getAnimations=function(){return[]}),Object.hasOwn||(Object.hasOwn=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}),"function"!=typeof Element.prototype.replaceChildren&&Object.defineProperty(Element.prototype,"replaceChildren",{configurable:!0,writable:!0,value:function(...e){for(;this.firstChild;)this.removeChild(this.firstChild);this.append(...e)}}),Array.prototype.at||Object.defineProperty(Array.prototype,"at",{value:function(e){if(e<0&&(e+=this.length),!(e<0||e>=this.length))return this[e]},writable:!0,enumerable:!1,configurable:!0}),String.prototype.replaceAll||Object.defineProperty(String.prototype,"replaceAll",{value:function(e,t){if("string"==typeof e)return this.split(e).join(t);if(e instanceof RegExp){if(!e.global)throw new TypeError("replaceAll ERROR");return this.replace(e,t)}throw new TypeError("replaceAll ERROR")},writable:!0,enumerable:!1,configurable:!0}),window.structuredClone||(window.structuredClone=e=>JSON.parse(JSON.stringify(e))),c.weakRef()},weakRef:()=>{var e;"object"==typeof(e=function(){switch(!0){case"object"==typeof globalThis&&!!globalThis:return globalThis;case"object"==typeof self&&!!self:return self;case"object"==typeof window&&!!window:return window;case"object"==typeof r.g&&!!r.g:return r.g;case"function"==typeof Function:return Function("return this")()}return null}())&&e&&void 0===e.WeakRef&&(e.WeakRef=function(e){function t(t){e.set(this,t)}return t.prototype.deref=function(){return e.get(this)},t}(new WeakMap))},supportStyle:(e,t)=>{var n=document.createElement("div");return n.style[e]=t,n.style.cssText.includes(e)},compressionStream:async()=>{window.CompressionStream||await r.e(230).then(r.bind(r,230))}};Object.assign(window,{nrcPolyfill:c});let d={flagName:"netnr",flagResp:"uuid",flagLibs:"libs",flagSuffix:".md",flagToken:null,flagLocalUsed:!0,flagLocalPath:"/libs/index.json",flagLocalJson:null,flagProxyServer:"https://api.codetabs.com/v1/proxy?quest=",flagProxyUsed:!1,flagTitle:document.title,currentTheme:"light",domLayout:null,domAvatar:null,domUserInfo:null,domSearchInput:null,domSearchDropdown:null,domCardsContainer:null,domSettingsPanel:null,domThemeToggle:null};Object.assign(window,{nrVary:d});let u={init:async()=>{isSecureContext&&!window.webpackHotUpdatenetnr&&navigator.serviceWorker.register("/sw.js").then(e=>console.debug("SW registered: ",e)).catch(e=>console.debug("SW failed: ",e)),await c.init(),u.initTheme(),await r.e(6).then(r.bind(r,6)),l.localforage=await new s({name:"nr-cache"}).init(),l.instanceUser=await new s({name:"nr-user"}).init(),await u.render(),u.bindEvent();let e=(location.hash.length>1?location.hash:location.pathname).substring(1).split("/");if(""!=e[0]&&(d.flagName=e[0]),null!=e[1]&&""!=e[1]&&(d.flagResp=e[1]),null!=e[2]&&""!=e[2]&&(d.flagLibs=e[2]),"#_local"==location.hash)d.flagLocalUsed=!0,await l.setItem("local",d.flagLocalUsed);else{let e=await l.getItem("local");null!=e&&(d.flagLocalUsed=e)}if(d.flagLocalUsed){const e=document.querySelector('[data-action="local"] .uuid-toggle-switch');e&&e.classList.add("active")}let t=await l.getItem("uuid-token-github");null!=t&&t.length>10&&(d.flagToken=t);let n=await l.getItem("proxy");if(null!=n&&(d.flagProxyUsed=n),d.flagProxyUsed){const e=document.querySelector('[data-action="proxy"] .uuid-toggle-switch');e&&e.classList.add("active")}document.getElementById("style0").remove(),d.domLayout.classList.remove("invisible"),await u.load()},initTheme:()=>{const e=i.cookie(".theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,n=e||(t?"dark":"light");u.setTheme(n)},setTheme:e=>{document.documentElement.setAttribute("data-theme",e),i.saveTheme(e),d.currentTheme=e},toggleTheme:()=>{const e="light"===d.currentTheme?"dark":"light";u.setTheme(e)},toggleDropdown:(e,t)=>{void 0===t&&(t=!e.classList.contains("show")),t?e.classList.add("show"):e.classList.remove("show")},createModal:(e,t,n=[])=>{const a=document.createElement("div");a.className="uuid-modal";const r=n.map(e=>`<button class="uuid-btn ${e.class||""}" data-action="${e.action||""}">${e.text}</button>`).join("");return a.innerHTML=`\n            <div class="uuid-modal-content">\n                <div class="uuid-modal-header">\n                    <h3 class="uuid-modal-title">${e}</h3>\n                    <button class="uuid-modal-close" data-action="close-modal">\n                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                            <line x1="18" y1="6" x2="6" y2="18"></line>\n                            <line x1="6" y1="6" x2="18" y2="18"></line>\n                        </svg>\n                    </button>\n                </div>\n                <div class="uuid-modal-body">\n                    ${t}\n                </div>\n                ${n.length?`<div class="uuid-modal-footer">${r}</div>`:""}\n            </div>\n        `,document.body.appendChild(a),a.addEventListener("click",e=>{(e.target===a||e.target.closest('[data-action="close-modal"]'))&&u.closeModal(a)}),setTimeout(()=>a.classList.add("show"),10),a},closeModal:e=>{e.classList.remove("show"),setTimeout(()=>e.remove(),300)},showNotification:(e,t="info",n=3e3)=>{const a=document.createElement("div");a.className=`uuid-notification uuid-notification-${t}`,a.textContent=e,Object.assign(a.style,{position:"fixed",top:"20px",right:"20px",padding:"12px 16px",borderRadius:"8px",color:"white",fontSize:"14px",zIndex:"3000",opacity:"0",transform:"translateX(100%)",transition:"all 0.3s ease"});const r={info:"#17a2b8",success:"#28a745",warning:"#ffc107",error:"#dc3545"};a.style.backgroundColor=r[t]||r.info,document.body.appendChild(a),setTimeout(()=>{a.style.opacity="1",a.style.transform="translateX(0)"},10),setTimeout(()=>{a.style.opacity="0",a.style.transform="translateX(100%)",setTimeout(()=>a.remove(),300)},n)},render:async()=>{let e=document.createElement("div");d.domLayout=e,e.className="invisible",e.innerHTML='\n<div class="uuid-container">\n    \x3c!-- Header --\x3e\n    <header class="uuid-header">\n        <div class="uuid-header-content">\n            \x3c!-- User Avatar and Info --\x3e\n            <div class="uuid-user-section">\n                <div class="uuid-avatar-wrapper" data-action="toggle-user-info">\n                    <img class="uuid-avatar" src="/favicon.ico" alt="User Avatar">\n                </div>\n                <div class="uuid-user-info-panel">\n                    \x3c!-- User info will be populated here --\x3e\n                </div>\n            </div>\n\n            \x3c!-- Search Section --\x3e\n            <div class="uuid-search-section">\n                <div class="uuid-search-wrapper">\n                    <input class="uuid-search-input" type="search" placeholder="静默搜索 (Ctrl+K)..." data-search="" />\n                    <div class="uuid-search-icon">\n                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                            <circle cx="11" cy="11" r="8"></circle>\n                            <path d="m21 21-4.35-4.35"></path>\n                        </svg>\n                    </div>\n                </div>\n                <div class="uuid-search-dropdown">\n                    \x3c!-- Search results will be populated here --\x3e\n                </div>\n            </div>\n\n            \x3c!-- Controls Section --\x3e\n            <div class="uuid-controls-section">\n                <button class="uuid-btn uuid-btn-icon" data-action="reload" title="重新加载">\n                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                        <polyline points="23 4 23 10 17 10"></polyline>\n                        <polyline points="1 20 1 14 7 14"></polyline>\n                        <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10M22.66 14.36A9 9 0 0 1 8.51 21.64L3 17"></path>\n                    </svg>\n                </button>\n                \n                <div class="uuid-settings-dropdown">\n                    <button class="uuid-btn uuid-btn-icon" data-action="toggle-settings" title="设置">\n                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                            <circle cx="12" cy="12" r="3"></circle>\n                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>\n                        </svg>\n                    </button>\n                    <div class="uuid-settings-panel">\n                        <div class="uuid-settings-item" data-action="theme">\n                            <span>主题切换</span>\n                            <div class="uuid-theme-toggle">\n                                <svg class="uuid-theme-icon uuid-theme-icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                                    <circle cx="12" cy="12" r="5"></circle>\n                                    <line x1="12" y1="1" x2="12" y2="3"></line>\n                                    <line x1="12" y1="21" x2="12" y2="23"></line>\n                                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>\n                                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>\n                                    <line x1="1" y1="12" x2="3" y2="12"></line>\n                                    <line x1="21" y1="12" x2="23" y2="12"></line>\n                                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>\n                                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>\n                                </svg>\n                                <svg class="uuid-theme-icon uuid-theme-icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>\n                                </svg>\n                            </div>\n                        </div>\n                        <div class="uuid-settings-divider"></div>\n                        <div class="uuid-settings-item" data-action="local">\n                            <span>本地模式</span>\n                            <div class="uuid-toggle-switch">\n                                <span class="uuid-toggle-slider"></span>\n                            </div>\n                        </div>\n                        <div class="uuid-settings-item" data-action="proxy">\n                            <span>GitHub 代理</span>\n                            <div class="uuid-toggle-switch">\n                                <span class="uuid-toggle-slider"></span>\n                            </div>\n                        </div>\n                        <div class="uuid-settings-item" data-action="token">\n                            <span>GitHub Token</span>\n                            <div class="uuid-token-status">\n                                <span class="uuid-token-indicator"></span>\n                            </div>\n                        </div>\n                        <div class="uuid-settings-divider"></div>\n                        <div class="uuid-settings-item" data-action="convert">\n                            <span>转换书签</span>\n                        </div>\n                        <div class="uuid-settings-item" data-action="about">\n                            <span>关于</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </header>\n\n    \x3c!-- Main Content --\x3e\n    <main class="uuid-main">\n        <div class="uuid-cards-container">\n            \x3c!-- Cards will be populated here --\x3e\n        </div>\n    </main>\n</div>\n',document.body.appendChild(e),d.domAvatar=e.querySelector(".uuid-avatar"),d.domUserInfo=e.querySelector(".uuid-user-info-panel"),d.domSearchInput=e.querySelector(".uuid-search-input"),d.domSearchDropdown=e.querySelector(".uuid-search-dropdown"),d.domCardsContainer=e.querySelector(".uuid-cards-container"),d.domSettingsPanel=e.querySelector(".uuid-settings-panel"),d.domThemeToggle=e.querySelector(".uuid-theme-toggle"),d.domThemeToggle.classList.toggle("dark","dark"===d.currentTheme)},load:async()=>{d.domCardsContainer.innerHTML='\n            <div class="uuid-loading">\n                <div class="uuid-loading-spinner"></div>\n                <span>正在加载...</span>\n            </div>\n        ',await u.viewUser(),await u.viewLink();try{let e=await l.instanceUser.getItem(`${d.flagName}:update-time`);e&&Date.now()-e>6048e5&&(await u.reqUser(d.flagName,!0),await u.reqLibs(d.flagName,d.flagResp,d.flagLibs,!0))}catch(e){}},bindEvent:()=>{document.body.addEventListener("click",async function(e){let t=e.target,n=t.closest("[data-action]");n&&u.triggerAction(n.dataset.action,n),t.closest(".uuid-user-section")||u.toggleDropdown(d.domUserInfo,!1),t.closest(".uuid-settings-dropdown")||u.toggleDropdown(d.domSettingsPanel,!1)}),d.domSearchInput.addEventListener("keydown",function(e){if(["ArrowUp","ArrowDown"].includes(e.code))e.preventDefault(),u.searchArrow(e.code);else if("Enter"==e.key){e.preventDefault();let t=d.domSearchDropdown.querySelector(".active");t&&t.click()}}),d.domSearchInput.addEventListener("input",function(){u.searchLink(this.value.trim())}),d.domSearchInput.addEventListener("focus",function(){this.classList.add("focused")}),d.domSearchInput.addEventListener("blur",function(){this.classList.remove("focused")}),document.body.addEventListener("keydown",function(e){if("Escape"===e.code)return e.preventDefault(),d.domSearchInput.value="",d.domSearchInput.dataset.search="",d.domSearchInput.placeholder="静默搜索 (Ctrl+K)...",u.searchLink(""),u.toggleDropdown(d.domSearchDropdown,!1),void d.domSearchInput.blur();if("INPUT"!==document.activeElement.tagName&&"TEXTAREA"!==document.activeElement.tagName)if(e.ctrlKey&&["KeyQ","KeyK"].includes(e.code))e.preventDefault(),d.domSearchInput.focus(),d.domSearchInput.dataset.search="",d.domSearchInput.placeholder="静默搜索 (Ctrl+K)...",u.searchLink("");else if("Backspace"==e.code)e.preventDefault(),d.domSearchInput.dataset.search.length&&(d.domSearchInput.dataset.search=d.domSearchInput.dataset.search.slice(0,-1)),d.domSearchInput.placeholder=d.domSearchInput.dataset.search.length?d.domSearchInput.dataset.search:"静默搜索 (Ctrl+K)...",u.searchLink(d.domSearchInput.dataset.search);else if("Enter"==e.key){if(e.preventDefault(),d.domSearchDropdown.classList.contains("show")){let e=d.domSearchDropdown.querySelector(".active");e&&e.click()}}else["ArrowUp","ArrowDown"].includes(e.code)?(e.preventDefault(),d.domSearchInput.dataset.search.length&&u.searchArrow(e.code)):/^[a-z0-9\.\_\-\/]$/i.test(e.key)&&!e.ctrlKey&&(d.domSearchInput.value="",document.documentElement.scrollTo(0,0),d.domSearchInput.dataset.search+=e.key,d.domSearchInput.placeholder=d.domSearchInput.dataset.search,u.searchLink(d.domSearchInput.dataset.search))})},triggerAction:async(e,t)=>{switch(e){case"toggle-user-info":u.toggleDropdown(d.domUserInfo);break;case"toggle-settings":u.toggleDropdown(d.domSettingsPanel);break;case"theme":u.toggleTheme(),d.domThemeToggle.classList.toggle("dark","dark"===d.currentTheme);break;case"token":{const e=`\n                        <div class="uuid-form-group">\n                            <label class="uuid-label">GitHub Token</label>\n                            <input class="uuid-input" type="password" placeholder="ghp_xxxxxxxxxxxxxxxxxxxx" value="${d.flagToken||""}" />\n                            <p style="margin-top: 8px; color: var(--text-secondary); font-size: 14px;">\n                                匿名访问限制（60次/小时）<br>\n                                <a href="https://github.com/settings/tokens" target="_blank">获取Token</a>\n                            </p>\n                        </div>\n                    `,t=u.createModal("设置 GitHub Token",e,[{text:"取消",action:"close-modal"},{text:"保存",action:"save-token",class:"uuid-btn-primary"}]);t.addEventListener("click",async e=>{if("save-token"===e.target.dataset.action){const e=t.querySelector("input").value.trim();if(""===e)d.flagToken=null,await l.removeItem("uuid-token-github"),u.showNotification("Token已清除","success");else{if(!(e.length>10))return void u.showNotification("Token格式不正确","error");d.flagToken=e,await l.setItem("uuid-token-github",e),u.showNotification("Token已保存","success")}u.closeModal(t)}})}break;case"local":{d.flagName,d.flagResp,new URL(d.flagLocalPath,location).href;const e=`\n                        <p>确定要切换到 ${d.flagLocalUsed?"GitHub 线上":"本地"} 模式吗？</p>\n                        <div style="margin: 16px 0; padding: 12px; background: var(--bg-secondary); border-radius: 6px; font-size: 14px;">\n                            <strong>当前：</strong> ${d.flagLocalUsed?"本地模式":"GitHub 线上模式"}<br>\n                            <strong>切换到：</strong> ${d.flagLocalUsed?"GitHub 线上模式":"本地模式"}\n                        </div>\n                    `;u.createModal("切换模式",e,[{text:"取消",action:"close-modal"},{text:"确定",action:"confirm-local",class:"uuid-btn-primary"}]).addEventListener("click",async e=>{"confirm-local"===e.target.dataset.action&&(d.flagLocalUsed=!d.flagLocalUsed,await l.setItem("local",d.flagLocalUsed),"#_local"===location.hash&&(location.hash=""),location.reload())})}break;case"proxy":d.flagProxyUsed=!d.flagProxyUsed,await l.setItem("proxy",d.flagProxyUsed);t.querySelector(".uuid-toggle-switch").classList.toggle("active",d.flagProxyUsed),u.showNotification(d.flagProxyUsed?"GitHub 代理已启用":"GitHub 代理已禁用","success");break;case"reload":{let e=await l.instanceUser.keys();for(const t of e)t.startsWith(`${d.flagName}:`)&&await l.instanceUser.removeItem(t);await u.load()}break;case"convert":{const e='\n                        <div class="uuid-form-group">\n                            <label class="uuid-label">选择书签文件</label>\n                            <input type="file" class="uuid-input" accept=".html" />\n                        </div>\n                        <div class="uuid-form-group">\n                            <label class="uuid-label">转换结果</label>\n                            <textarea class="uuid-input uuid-textarea" placeholder="转换结果将在此显示..." readonly></textarea>\n                        </div>\n                    ',t=u.createModal("转换HTML书签",e,[{text:"关闭",action:"close-modal"}]),n=t.querySelector('input[type="file"]'),a=t.querySelector("textarea");n.addEventListener("change",async e=>{const t=e.target.files[0];if(t)try{const e=await o.reader(t),n=[],r=document.createElement("div");r.innerHTML=e;const i=r.querySelector("h1");i&&n.push("# "+i.innerHTML),u.convertHtml(r,n),a.value=n.join("\r\n"),u.showNotification("转换完成","success")}catch(e){console.error(e),u.showNotification("转换失败","error")}})}break;case"about":{const e='\n                        <div style="line-height: 1.6;">\n                            <p><strong>GitHub:</strong> <a href="https://github.com/netnr" target="_blank">https://github.com/netnr</a></p>\n                            <p><strong>联系打赏:</strong> <a href="https://zme.ink" target="_blank">https://zme.ink</a></p>\n                            <hr style="margin: 16px 0; border: none; border-top: 1px solid var(--border-color);">\n                            <p>缓存后可离线使用</p>\n                            <hr style="margin: 16px 0; border: none; border-top: 1px solid var(--border-color);">\n                            <p>Fork 项目，从浏览器导出书签 HTML，再转换书签为 Markdown，保存到 libs/*.md</p>\n                            <p>私有化部署，更新索引文件 libs/index.json，页面再启用 本地 Local</p>\n                            <hr style="margin: 16px 0; border: none; border-top: 1px solid var(--border-color);">\n                            <p>uuid.fun 于 2028-11-09 8:00 到期，计划不再续费，启用子域名：<a href="https://uu.zme.ink" target="_blank">https://uu.zme.ink</a></p>\n                        </div>\n                    ';u.createModal("关于",e,[{text:"关闭",action:"close-modal"}])}}},reqUser:async(e,t)=>{let n=`https://api.github.com/users/${e}`,a=`${e}:${n}`,r=await l.instanceUser.getItem(a);return(null==r||t)&&(r=await u.reqServer(n),r&&(await l.instanceUser.setItem(a,r),await l.instanceUser.setItem(`${e}:update-time`,Date.now()))),r},reqLibs:async(e,t,n,a)=>{let r=`https://api.github.com/repos/${e}/${t}/contents/${n}`,o=`${e}:${r}`,i=await l.instanceUser.getItem(o);return(null==i||a)&&(i=await u.reqServer(r),i&&await l.instanceUser.setItem(o,i)),i},reqRaw:async e=>{let t=`${d.flagName}:${e}`,n=await l.instanceUser.getItem(t);return null==n&&(n=await u.reqServer(`${e}?_${i.random()}`,{type:"text"}),n&&await l.instanceUser.setItem(t,n)),n},convertHtml:(e,t)=>{for(let n=0;n<e.children.length;n++){let a=e.children[n];switch(a.nodeName){case"H3":t.push(""),t.push("### "+a.innerHTML);break;case"DL":case"P":u.convertHtml(a,t);break;case"DT":if(1==a.children.length){let e=a.querySelector("a");t.push("- ["+e.innerHTML.replace(/`/g,"\\`")+"]("+e.href+")")}else u.convertHtml(a,t)}}},viewUser:async()=>{let e;if(d.flagLocalUsed?(d.flagLocalJson=await u.reqServer(d.flagLocalPath),d.flagLocalJson?e=d.flagLocalJson.user:u.showNotification("加载失败","error")):e=await u.reqUser(d.flagName),e){d.domAvatar.onerror=function(){d.domAvatar.src="/favicon.ico",d.domAvatar.onerror=null},d.domAvatar.src=e.avatar_url;const t=e.name||e.login,n=e.bio||"",a=e.company||"",r=e.location||"",o=e.blog||"",i=`\n                <div class="uuid-user-info-content">\n                    <div class="uuid-user-name">\n                        <a href="https://github.com/${e.login}" target="_blank">${t}</a>\n                    </div>\n                    ${n?`<div class="uuid-user-bio">${n}</div>`:""}\n                    <div class="uuid-user-details">\n                        ${a?`\n                            <div class="uuid-user-detail">\n                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                                    <path d="M3 21h18"></path>\n                                    <path d="M5 21V7l8-4v18"></path>\n                                    <path d="M19 21V11l-6-4"></path>\n                                </svg>\n                                <span>${a}</span>\n                            </div>\n                        `:""}\n                        ${r?`\n                            <div class="uuid-user-detail">\n                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>\n                                    <circle cx="12" cy="10" r="3"></circle>\n                                </svg>\n                                <span>${r}</span>\n                            </div>\n                        `:""}\n                        ${o?`\n                            <div class="uuid-user-detail">\n                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                                    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>\n                                    <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>\n                                </svg>\n                                <a href="${o}" target="_blank">${o}</a>\n                            </div>\n                        `:""}\n                    </div>\n                </div>\n            `;d.domUserInfo.innerHTML=i,document.title=`${e.login} - ${d.flagTitle}`}},viewLink:async()=>{let e;if(d.flagLocalUsed?d.flagLocalJson&&(e=d.flagLocalJson.libs):e=await u.reqLibs(d.flagName,d.flagResp,d.flagLibs),e){const t=[];for(const n of e)if("file"===n.type&&n.name.endsWith(d.flagSuffix)){const e=n.name.substring(0,n.name.length-d.flagSuffix.length),a=`\n                        <div class="uuid-card" id="${`card-${t.length}`}">\n                            <div class="uuid-card-header">\n                                <h3 class="uuid-card-title">${e}</h3>\n                            </div>\n                            <div class="uuid-card-content">\n                                <div class="uuid-loading">\n                                    <div class="uuid-loading-spinner"></div>\n                                    <span>加载中...</span>\n                                </div>\n                            </div>\n                        </div>\n                    `;t.push(a)}d.domCardsContainer.innerHTML=t.join("");let n=0;for(const t of e)if("file"===t.type&&t.name.endsWith(d.flagSuffix)){const e=`card-${n}`,a=document.querySelector(`#${e} .uuid-card-content`);try{const e=await u.reqRaw(t.download_url);if(e){const t=(await r.e(666).then(r.bind(r,666))).parse(e),n=document.createElement("div");n.innerHTML=t;const o=[];let i=null;n.childNodes.forEach(e=>{if(e.nodeType===Node.ELEMENT_NODE)if("H3"===e.tagName)i&&o.push(i),i={title:e.textContent,links:[]};else if("UL"===e.tagName||"OL"===e.tagName){i||(i={title:null,links:[]});e.querySelectorAll("a").forEach(e=>{let t=e.textContent.trim();if(t.includes("http")){const e=t.split(" ");e.length>1&&e[e.length-1].includes("http")&&(t=e.slice(0,-1).join(" "))}i.links.push({title:t,url:e.href})})}}),i&&o.push(i);const s=o.map(e=>`\n                                <div class="uuid-card-section">\n                                    ${e.title?`\n                                        <h4 class="uuid-card-section-title">\n                                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                                                <path d="M9 11l3 3L22 4"></path>\n                                                <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>\n                                            </svg>\n                                            ${e.title}\n                                        </h4>\n                                    `:""}\n                                    <div class="uuid-links-grid">\n                                        ${e.links.map(e=>`\n                                            <a href="${e.url}" target="_blank" class="uuid-link">\n                                                ${e.title}\n                                            </a>\n                                        `).join("")}\n                                    </div>\n                                </div>\n                            `).join("");a.innerHTML=s||'\n                                <div class="uuid-empty">\n                                    <svg class="uuid-empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                                        <circle cx="12" cy="12" r="10"></circle>\n                                        <path d="M12 6v6l4 2"></path>\n                                    </svg>\n                                    <div class="uuid-empty-title">暂无内容</div>\n                                    <div class="uuid-empty-description">此文件暂无有效的链接内容</div>\n                                </div>\n                            '}else a.innerHTML='\n                                <div class="uuid-empty">\n                                    <svg class="uuid-empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                                        <circle cx="12" cy="12" r="10"></circle>\n                                        <line x1="12" y1="8" x2="12" y2="12"></line>\n                                        <line x1="12" y1="16" x2="12.01" y2="16"></line>\n                                    </svg>\n                                    <div class="uuid-empty-title">加载失败</div>\n                                    <div class="uuid-empty-description">无法加载此文件的内容</div>\n                                </div>\n                            '}catch(e){console.error("Error loading card content:",e),a.innerHTML='\n                            <div class="uuid-empty">\n                                <svg class="uuid-empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                                    <circle cx="12" cy="12" r="10"></circle>\n                                    <line x1="12" y1="8" x2="12" y2="12"></line>\n                                    <line x1="12" y1="16" x2="12.01" y2="16"></line>\n                                </svg>\n                                <div class="uuid-empty-title">加载错误</div>\n                                <div class="uuid-empty-description">处理文件内容时出现错误</div>\n                            </div>\n                        '}n++}d.domCardsContainer.dataset.ended=!0}else d.domCardsContainer.innerHTML='\n                <div class="uuid-empty">\n                    <svg class="uuid-empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                        <circle cx="12" cy="12" r="10"></circle>\n                        <line x1="12" y1="8" x2="12" y2="12"></line>\n                        <line x1="12" y1="16" x2="12.01" y2="16"></line>\n                    </svg>\n                    <div class="uuid-empty-title">加载失败</div>\n                    <div class="uuid-empty-description">无法获取收藏夹列表</div>\n                </div>\n            '},searchArrow:e=>{const t=d.domSearchDropdown.querySelectorAll(".uuid-search-item");if(0===t.length)return;const n=d.domSearchDropdown.querySelector(".uuid-search-item.active");let a=-1;t.forEach((e,t)=>{e===n&&(a=t)}),n&&n.classList.remove("active"),"ArrowUp"===e?a=a<=0?t.length-1:a-1:"ArrowDown"===e&&(a=a>=t.length-1?0:a+1),a>=0&&a<t.length&&t[a].classList.add("active")},searchLink:e=>{if(d.domCardsContainer.dataset.ended){const t=[];if(""!==e.trim()){const n=e.toLowerCase(),a=d.domCardsContainer.querySelectorAll("a");for(let e=0;e<a.length;e++){const r=a[e];if(`${r.href},${r.textContent},${r.title||""}`.toLowerCase().includes(n)&&(t.push({url:r.href,title:r.textContent.trim(),element:r}),t.length>=7))break}}if(t.length>0){const e=t.map((e,t)=>`\n                    <a href="${e.url}" target="_blank" class="uuid-search-item ${0===t?"active":""}">\n                        <div class="uuid-search-item-url">${e.url}</div>\n                        <div class="uuid-search-item-title">${e.title}</div>\n                    </a>\n                `).join("");d.domSearchDropdown.innerHTML=e,u.toggleDropdown(d.domSearchDropdown,!0)}else u.toggleDropdown(d.domSearchDropdown,!1)}},reqServer:async(e,t)=>{t=t||{},null!=d.flagToken&&d.flagToken.length>10&&!e.includes("githubusercontent")&&(t.headers=t.headers||{},t.headers.authorization=`token ${d.flagToken}`),d.flagProxyUsed&&!d.flagLocalUsed&&(e=`${d.flagProxyServer}${encodeURIComponent(e)}`);let n=await i.fetch(e,t);if(n.error)console.error("Network error:",n.error),u.showNotification("网络错误","error");else if(0==n.resp.ok)403==n.resp.status?u.showNotification("请设置 Token","warning"):u.showNotification(`请求失败 (${n.resp.status})`,"error");else if(n.resp.ok&&n.result)return n.result}};Object.assign(window,{nrWeb:u}),"loading"==document.readyState?document.addEventListener("DOMContentLoaded",u.init):u.init()})();