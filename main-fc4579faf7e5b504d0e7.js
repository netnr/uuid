(()=>{var e,t,a,n,o={204:(e,t,a)=>{var n={"./web.css":285};function o(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=r,e.exports=o,o.id=204},747:(e,t,a)=>{var n={"./nrShared.css":31};function o(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=r,e.exports=o,o.id=747},285:(e,t,a)=>{"use strict";a.r(t)},31:(e,t,a)=>{"use strict";a.r(t)},330:e=>{"use strict";e.exports={rE:"7.0.20"}}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={exports:{}};return o[e].call(a.exports,a,a.exports,i),a.exports}i.m=o,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(a,n){if(1&n&&(a=this(a)),8&n)return a;if("object"==typeof a&&a){if(4&n&&a.__esModule)return a;if(16&n&&"function"==typeof a.then)return a}var o=Object.create(null);i.r(o);var r={};e=e||[null,t({}),t([]),t(t)];for(var s=2&n&&a;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>r[e]=()=>a[e]));return r.default=()=>a,i.d(o,r),o},i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,a)=>(i.f[a](e,t),t)),[])),i.u=e=>e+"-"+{23:"4e1467511dbb0163a358",414:"8edcaeefa69e4254a0b2",580:"0e00db6321c61dac2cf3",791:"5a4de821ef9350a09439"}[e]+".js",i.miniCssF=e=>e+"-d83aa8b4563dbceee6f4.css",i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a={},n="netnr:",i.l=(e,t,o,r)=>{if(a[e])a[e].push(t);else{var s,l;if(void 0!==o)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var m=d[c];if(m.getAttribute("src")==e||m.getAttribute("data-webpack")==n+o){s=m;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.setAttribute("data-webpack",n+o),s.src=e),a[e]=[t];var u=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var o=a[e];if(delete a[e],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(n))),t)return t(n)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=u.bind(null,s.onerror),s.onload=u.bind(null,s.onload),l&&document.head.appendChild(s)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="/",(()=>{if("undefined"!=typeof document){var e=e=>new Promise(((t,a)=>{var n=i.miniCssF(e),o=i.p+n;if(((e,t)=>{for(var a=document.getElementsByTagName("link"),n=0;n<a.length;n++){var o=(i=a[n]).getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(o===e||o===t))return i}var r=document.getElementsByTagName("style");for(n=0;n<r.length;n++){var i;if((o=(i=r[n]).getAttribute("data-href"))===e||o===t)return i}})(n,o))return t();((e,t,a,n,o)=>{var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",i.nc&&(r.nonce=i.nc),r.onerror=r.onload=a=>{if(r.onerror=r.onload=null,"load"===a.type)n();else{var i=a&&a.type,s=a&&a.target&&a.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+i+": "+s+")");l.name="ChunkLoadError",l.code="CSS_CHUNK_LOAD_FAILED",l.type=i,l.request=s,r.parentNode&&r.parentNode.removeChild(r),o(l)}},r.href=t,a?a.parentNode.insertBefore(r,a.nextSibling):document.head.appendChild(r)})(e,o,null,t,a)})),t={792:0};i.f.miniCss=(a,n)=>{t[a]?n.push(t[a]):0!==t[a]&&{580:1}[a]&&n.push(t[a]=e(a).then((()=>{t[a]=0}),(e=>{throw delete t[a],e})))}}})(),(()=>{var e={792:0};i.f.j=(t,a)=>{var n=i.o(e,t)?e[t]:void 0;if(0!==n)if(n)a.push(n[2]);else if(580!=t){var o=new Promise(((a,o)=>n=e[t]=[a,o]));a.push(n[2]=o);var r=i.p+i.u(t),s=new Error;i.l(r,(a=>{if(i.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var o=a&&("load"===a.type?"missing":a.type),r=a&&a.target&&a.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",s.name="ChunkLoadError",s.type=o,s.request=r,n[1](s)}}),"chunk-"+t,t)}else e[t]=0};var t=(t,a)=>{var n,o,[r,s,l]=a,d=0;if(r.some((t=>0!==e[t]))){for(n in s)i.o(s,n)&&(i.m[n]=s[n]);if(l)l(i)}for(t&&t(a);d<r.length;d++)o=r[d],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0},a=self.webpackChunknetnr=self.webpackChunknetnr||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),(()=>{"use strict";let e={init:(t,a,n=document)=>{n.addEventListener("dragover",(e=>{a&&a.contains(e.target)||(e.preventDefault(),e.stopPropagation())})),n.addEventListener("drop",(async n=>{if(!a||!a.contains(n.target)){n.preventDefault();let a=await e.readDataTransferItems(n.dataTransfer.items);a.length&&await t(a,"drag")}})),a&&a.addEventListener("change",(async function(){let e=this.files;e.length&&await t(e,"change")})),document.addEventListener("paste",(async function(e){if(!["INPUT","TEXTAREA"].includes(e.target.nodeName)){let a=e.clipboardData.items,n=[];for(let e=0;e<a.length;e++){let t=a[e].getAsFile();t&&n.push(t)}n.length&&await t(n,"paste")}}))},readDataTransferItems:async t=>{let a=[],n=[];for(let o=0;o<t.length;o++){let r=t[o],i=r.webkitGetAsEntry();if(null!=i)a.push(e.readDataTransferItemEntry(i));else{let e=r.getAsFile();e&&n.push(e)}}return(await Promise.all(a)).forEach((e=>{e.length?n=n.concat(e):n.push(e)})),n},readDataTransferItemEntry:(t,a)=>new Promise((n=>{if(a=a||"",t.isFile)t.file((e=>{""!=a&&(e.fullPath=a+e.name),n(e)}));else if(t.isDirectory){t.createReader().readEntries((o=>{let r=[];for(let n=0;n<o.length;n++)r.push(e.readDataTransferItemEntry(o[n],a+t.name+"/"));Promise.all(r).then((e=>{let t=[];e.forEach((e=>{e.length?t=t.concat(e):t.push(e)})),n(t)}))}))}})),base64ToFile:async(e,t,a)=>{let n=await fetch(e),o=await n.blob();return null==a&&(a=e.split(";")[0].split(":").pop()),new File([o],t,{type:a})},canvasToBlob:e=>new Promise((t=>e.toBlob(t))),reader:(e,t="Text",a="utf-8")=>new Promise(((n,o)=>{const r=new FileReader;r.onloadend=()=>n(r.result),r.onerror=()=>o(),"Text"==t?r.readAsText(e,a):r[`readAs${t}`](e)}))};Object.assign(window,{nrcFile:e});let t={version:i(330).rE,lastFetchDate:null,cookie:function(e,t,a){if(1==arguments.length){let t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?t[2]:null}{let n=`${e}=${t};Path=/`;if(a){let e=new Date;e.setTime(e.getTime()+a),n=`${n};Expires=${e.toGMTString()}`}document.cookie=n}},isDark:()=>document.cookie.includes(".theme=dark"),saveTheme:e=>{let t=new Date;t.setFullYear(t.getFullYear()+1),document.cookie=`.theme=${e};Path=/;Expires=${t.toGMTString()}`},encode:e=>window.btoa(encodeURIComponent(e)),decode:e=>{try{e=decodeURIComponent(window.atob(e))}catch(e){}return e},isNullOrWhiteSpace:e=>null==e||""==e.toString().trim(),getFileNameWithoutExtension:e=>{var t=e.split(".");return t.pop(),t.join(".")},UUID:()=>window.crypto&&window.crypto.randomUUID?crypto.randomUUID():URL.createObjectURL(new Blob([])).split("/").pop(),random:(e=99999,t=0)=>Math.floor(Math.random()*(e-t+1)+t),amdKeys:["require","define"],amdInit:()=>{window.define&&t.amdKeys.forEach((e=>window[`_${e}`]=window[e]))},amdHide:()=>{window.define&&t.amdKeys.forEach((e=>window[e]=null))},amdReset:()=>{window._define&&t.amdKeys.forEach((e=>window[e]=window[`_${e}`]))},addSeconds:(e,t)=>(e.setSeconds(e.getSeconds()+t),e),addMinutes:(e,t)=>(e.setMinutes(e.getMinutes()+t),e),addHours:(e,t)=>(e.setHours(e.getHours()+t),e),addDays:(e,t)=>(e.setDate(e.getDate()+t),e),addMonths:(e,t)=>(e.setMonth(e.getMonth()+t),e),addYears:(e,t)=>(e.setFullYear(e.getFullYear()+t),e),type:function(e){return{}.toString.call(e).split(" ")[1].replace("]","")},clone:e=>window.structuredClone?window.structuredClone(e):JSON.parse(JSON.stringify(e)),sleep:e=>new Promise((t=>setTimeout((()=>t()),e||1e3))),trimStart:(e,t)=>{for(e=e.toString().trim();e.startsWith(t);)e=e.substring(t.length);return e},trimEnd:(e,t)=>{for(e=e.toString().trim();e.endsWith(t);)e=e.substring(0,e.length-t.length);return e},error:()=>{throw new Error("Fake Error")},dispatchEvent:(e,t=window)=>t.dispatchEvent(new Event(e)),cssvar:(e,t,a)=>{if(null==a)return getComputedStyle(e).getPropertyValue(t);e.style.setProperty(t,a)},xssOf:e=>{let t=window.DOMPurify;return t?t.sanitize(e,{ADD_ATTR:["password-toggle","clearable","variant","target"]}):(console.debug("DOMPurify not found"),e)},htmlOf:e=>String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"),htmlEncode:e=>e.replace(/[\u00A0-\u9999<>\&]/g,(e=>"&#"+e.charCodeAt(0)+";")),htmlDecode:e=>{let t=document.createElement("div");return t.innerHTML=e,t.innerText},arrayDistinct:e=>Array.from(new Set(e)),groupBy:(e,t)=>Array.from(new Set(e.map(t))),isDanger:e=>/[^a-zA-Z0-9_]+/.test(e),dangerReplace:e=>e.replace(/[^a-zA-Z0-9_]+/g,""),isRiskFile:e=>{let a=!1;if(t.isNullOrWhiteSpace(e)||e.length>250||e.endsWith("."))a=!0;else{let t=e.split("."),n=t.length>1?t.pop().toLowerCase():"";(n.length>10||n.length>1&&"exe,msi,bat,sh,php,php3,asa,asp,aspx,css,htm,html,mhtml,js,jse,jsp,jspx,dll,so,jar,war,ear,ps1,psm1,pl,pm,py,pyc,pyo,rb".includes(n))&&(a=!0)}return a},humpToUnderline:e=>{let t=[];for(let a=0;a<e.length;a++){let n=e[a].toLowerCase(),o=e.charCodeAt(a);o>=65&&o<=90?t.push(`_${n}`):t.push(n)}return t.join("")},byteLength:e=>{let t=0;return Array.from(e).map((function(e){t+=e.charCodeAt(0)>255?2:1})),t},fromCommaToArray:e=>null==e||""==e.trim()?[]:e.split(","),fromKeyToURLParams:e=>{if("Object"==t.type(e))for(const t in e)null!==e[t]&&void 0!==e[t]||(e[t]="");return new URLSearchParams(e).toString()},fromFormToKey:e=>Object.fromEntries(t.fromFormToFormData(e)),fromFormToFormData:e=>{let t=new FormData(e);return e.querySelectorAll("sl-select[multiple]").forEach((e=>{e.name&&t.set(e.name,e.value.join())})),t},fromKeyToFormData:e=>{let t=new FormData;for(const a in e){null!==e[a]&&t.append(a,e[a])}return t},getUrlParams:(e,t)=>new URLSearchParams(t||location.search).get(e),findParentElement:(e,t)=>{let a=e;for(;null!=a;){if(t(a))return a;a=a.parentElement}return null},readDOM:(e,t,a,n)=>{e.querySelectorAll("*").forEach((e=>{if(e.classList.value.startsWith(t)){let o="dom";e.classList[0].substring(t.length+1).split("-").forEach((e=>o+=e.substring(0,1).toUpperCase()+e.substring(1))),1!=n&&o in a||(a[o]=e)}}))},editDOM:e=>{e.setAttribute("contenteditable",!0),e.setAttribute("spellcheck",!1)},fetch:async(e,a)=>{let n={resp:null,result:null,error:null};try{a=a||{method:"GET",Cache:"no-cache"};let o=await fetch(e,a);n.resp=o;try{switch(t.lastFetchDate=o.headers.get("date"),null!=t.lastFetchDate&&(t.lastFetchDate=t.formatDateTime("datetime",t.lastFetchDate)),a.type){case"text":n.result=await o.text();break;case"blob":n.result=await o.blob();break;case"reader":n.result=await o.body.getReader();break;default:n.result=await o.json()}}catch(e){if(o.ok)throw e}}catch(e){n.error=e}return n},isLock:e=>"true,true,true"==["NumLock","CapsLock","ScrollLock"].map((t=>!!e.getModifierState&&e.getModifierState(t))),lockGet:e=>{let a=Date.now().toString(),n=t.isLock(e)?(Number(a.slice(7,-3).split("").reverse().join(""))-3).toString().padStart(3,"0"):a.slice(-3);return a=`${a.slice(0,-3)}${n}`,a},lockSet:e=>{let a=t.lockGet(e);t.cookie(".lock",a)},getIconHtml:(e,a=16)=>{let n=t.tsIcons[e];if(n){return`<svg xmlns="http://www.w3.org/2000/svg" width="${a}" height="${a}" fill="currentColor" class="bi bi-${e}" viewBox="0 0 16 16">${n.map((e=>`<path d="${e}"/>`))}</svg>`}},getIconDom:(e,t=16)=>{let a=getIconHtml(e,t);if(a){let e=document.createElement("div");return e.innerHTML=a,e.children[0]}},tsIcons:{moon:["M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278zM4.858 1.311A7.269 7.269 0 0 0 1.025 7.71c0 4.02 3.279 7.276 7.319 7.276a7.316 7.316 0 0 0 5.205-2.162c-.337.042-.68.063-1.029.063-4.61 0-8.343-3.714-8.343-8.29 0-1.167.242-2.278.681-3.286z"],"sum-fill":["M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"],"bell-fill":["M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zm.995-14.901a1 1 0 1 0-1.99 0A5.002 5.002 0 0 0 3 6c0 1.098-.5 6-2 7h14c-1.5-1-2-5.902-2-7 0-2.42-1.72-4.44-4.005-4.901z"],"person-fill":["M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3Zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"]},tsLoaded:{},importStyle:async e=>{e=t.mirrorNPM(e);let a=t.tsLoaded[e];return a||(t.tsLoaded[e]=a=new Promise((t=>{let a=!1;if(document.querySelectorAll("link").forEach((t=>{t.href&&t.href.includes(e)&&(a=!0)})),a)t();else{let a=document.createElement("LINK");a.href=e,a.rel="stylesheet","onload"in a?a.onload=()=>{t()}:t(),document.head.appendChild(a)}}))),a},importScript:async(e,a)=>{e=t.mirrorNPM(e);let n=t.tsLoaded[e];return n||(t.tsLoaded[e]=n=new Promise(((t,n)=>{let o,r=document.scripts;for(let t=0;t<r.length;t++){let a=r[t];if(a.src.includes(e)){o=a;break}}if(o)t();else{let o=document.createElement("SCRIPT");o.src=e,o.type=a||"text/javascript",o.onerror=function(e){n(e)},o.onload=function(){t()},document.head.appendChild(o)}}))),n},require:(e,a)=>new Promise((n=>{if(a in t.tsLoaded)n();else{let o=a.split(",");e=e.map((e=>t.mirrorNPM(e))),window.require(e,(function(){for(let e=0;e<arguments.length;e++)Object.assign(window,{[o[e].trim()]:arguments[e]});t.tsLoaded[a]=!0,n()}))}})),mirrorNPM:e=>{let t=/(https?:\/\/[\w.-]+)\/(.*)@([\d.]+)\/(.*)\.(\w+)/.exec(e);return null!=t&&(e=`https://ss.netnr.com/${t[2]}@${t[3]}/${t[4]}.${t[5]}`),e},tsBottomKeepHeight:40,setHeightFromBottom:(e,a)=>{let n=null==a?t.tsBottomKeepHeight:a,o=e.getBoundingClientRect().top+n;Object.assign(e.style,{height:`calc(100vh - ${o}px)`,minHeight:"200px"})},formatByteSize:function(e,t=2,a=1024){if(Math.abs(e)<a)return e+" B";const n=1e3==a?["KB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];let o=-1;const r=10**t;do{e/=a,++o}while(Math.round(Math.abs(e)*r)/r>=a&&o<n.length-1);return(1*e.toFixed(t)).toString()+" "+n[o]},formatDateTime:(e,a)=>{switch(t.type(a)){case"String":case"Number":{let e=new Date(a);isNaN(e)?a.includes("年")&&a.includes("月")&&a.includes("日")&&(e=new Date(a.replace(/年|月/g,"-").replace("日",""))):10==a.length&&e.setHours(0,0,0,0),a=e}break;case"Date":break;default:a=new Date}switch(e=e||"yyyy-MM-dd HH:mm:ss"){case"date":e="yyyy-MM-dd";break;case"time":e="HH:mm:ss";break;case"datetime":e="yyyy-MM-dd HH:mm:ss";break;case"datetime-local":e="yyyy-MM-ddTHH:mm"}return[["yyyy",a.getFullYear()],["MM",a.getMonth()+1],["dd",a.getDate()],["HH",a.getHours()],["mm",a.getMinutes()],["ss",a.getSeconds()],["fff",a.getMilliseconds()]].reduce(((e,t)=>e.replace(t[0],`${t[1]}`.padStart(t[0].length,"0"))),e)},now:()=>t.formatDateTime("datetime"),downloadBlob:function(e,a){let n=window.URL.createObjectURL(e);t.downloadUrl(n,a)},downloadCanvas:function(e,a,n,o){let r;r="image/jpeg"==n?e.toDataURL(n,o):e.toDataURL(n||"image/png"),t.downloadUrl(r,a)},downloadText:function(e,a,n){let o=new Blob([e],{type:n||"text/plain"}),r=window.URL.createObjectURL(o);t.downloadUrl(r,a)},downloadUrl:function(e,t){console.debug(e);let a=document.createElement("a");a.href=e,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a)},performance:()=>{if(window.performance){let e=window.performance.getEntries();for(const a of e)if("PerformanceNavigationTiming"==t.type(a)){console.debug(a);break}}},voice:function(e){if(console.debug(e),"function"==typeof SpeechSynthesisUtterance){let t=new SpeechSynthesisUtterance(e);t.lang="zh-CN",window.speechSynthesis.speak(t)}},notify:async e=>{if("granted"==await Notification.requestPermission())return new Notification(e.title||"消息",e);console.debug(e)},clipboard:async e=>{let t;if(navigator.clipboard)return t=null==e?await navigator.clipboard.readText():await navigator.clipboard.writeText(e),t;if(null!=e){let t=document.createElement("textarea");return t.value=e,t.style.position="fixed",t.style.opacity=0,document.body.appendChild(t),t.select(),window.document.execCommand("Copy"),t.remove(),e}return ndkI18n.lg.unsupported}};Object.assign(window,{nrcBase:t});class a{constructor(e={}){this.db=null,this.name=e.name||"localforage",this.storeName=e.storeName||"keyvaluepairs",this.version=e.version||2}init(){return new Promise(((e,t)=>{if(this.db)return void e(this);const a=window.indexedDB.open(this.name,this.version);a.onerror=()=>{t(a.error)},a.onupgradeneeded=()=>{const e=a.result;e.objectStoreNames.contains(this.storeName)||e.createObjectStore(this.storeName)},a.onsuccess=()=>{this.db=a.result,e(this)}}))}_performTransaction(e,t){return new Promise(((a,n)=>{const o=this.db.transaction(this.storeName,e),r=o.objectStore(this.storeName);o.oncomplete=()=>{a()},o.onerror=e=>{n(e.target.error)},t(r,a,n)}))}setItem(e,t){return this._performTransaction("readwrite",((a,n,o)=>{const r=a.put(t,e);r.onsuccess=()=>{n()},r.onerror=()=>{o(r.error)}}))}getItem(e){return this._performTransaction("readonly",((t,a,n)=>{const o=t.get(e);o.onsuccess=()=>{a(o.result)},o.onerror=()=>{n(o.error)}}))}removeItem(e){return this._performTransaction("readwrite",((t,a,n)=>{const o=t.delete(e);o.onsuccess=()=>{a()},o.onerror=()=>{n(o.error)}}))}keys(){return this._performTransaction("readonly",((e,t,a)=>{const n=e.getAllKeys();n.onsuccess=()=>{t(n.result)},n.onerror=()=>{a(n.error)}}))}clear(){return this._performTransaction("readwrite",((e,t,a)=>{const n=e.clear();n.onsuccess=()=>{t()},n.onerror=()=>{a(n.error)}}))}}Object.assign(window,{nrcIndexedDB:a});let n={init:async()=>{n.localforage=await(new a).init()},localforage:null,getItem:async e=>await n.localforage.getItem(e),setItem:async(e,t)=>await n.localforage.setItem(e,t),removeItem:async e=>await n.localforage.removeItem(e),keys:async()=>await n.localforage.keys(),clear:async()=>await n.localforage.clear()};Object.assign(window,{nrStorage:n});let o={tsLoaded:null,rely:async()=>(null==o.tsLoaded&&(o.tsLoaded=new Promise((e=>{let a="https://npmcdn.com/monaco-editor@0.47.0/min/vs/loader.js";a=t.mirrorNPM(a),t.importScript(a).then((()=>{window.require.config({paths:{vs:a.replace("/loader.js","")},"vs/nls":{availableLanguages:{"*":"zh-cn"}}}),window.require(["vs/editor/editor.main"],(function(){o.defaultSetting(),e()}))}))}))),o.tsLoaded),defaultSetting:()=>{monaco.languages.html.registerHTMLLanguageService("xml",{},{documentFormattingEdits:!0}),monaco.languages.json.jsonDefaults.diagnosticsOptions.comments="ignore"},config:e=>Object.assign({theme:t.isDark()?"vs-dark":"vs",value:"",language:"plaintext",fontSize:18,automaticLayout:!0,unicodeHighlight:{ambiguousCharacters:!1},scrollbar:{verticalScrollbarSize:13,horizontalScrollbarSize:13},scrollBeyondLastLine:!0,minimap:{enabled:!0}},e),create:(e,t)=>{let a=monaco.editor.create(e,o.config(t));return o.fullScreen(a),o.wordWrap(a),a},formatter:e=>e.trigger("a","editor.action.formatDocument"),selectedValue:e=>e.getModel().getValueInRange(e.getSelection()),keepSetValue:(e,t)=>{let a=e.getPosition();e.executeEdits("",[{range:e.getModel().getFullModelRange(),text:t}]),e.setSelection(new monaco.Range(0,0,0,0)),e.setPosition(a)},setLanguage:(e,t)=>monaco.editor.setModelLanguage(e.getModel(),t),getLanguage:e=>e.getModel().getLanguageId(),getAllLanguages:()=>monaco.languages.getLanguages().map((e=>e.id)).filter((e=>!e.includes("."))),onChange:(e,t,a)=>{a=a||500,e.onDidChangeModelContent((function(){clearTimeout(o.defer_change),o.defer_change=setTimeout((function(){t(e.getValue())}),a)}))},fullScreen:function(e){e.addAction({id:"meid-fullscreen",label:"全屏切换",keybindings:[monaco.KeyMod.CtrlCmd|monaco.KeyMod.Alt|monaco.KeyCode.KeyM],contextMenuGroupId:"me-01",run:function(e){e.getContainerDomNode().classList.toggle("nrg-fullscreen")}})},wordWrap:function(e){e.addAction({id:"meid-wordwrap",label:"换行切换",keybindings:[monaco.KeyMod.CtrlCmd|monaco.KeyMod.Alt|monaco.KeyCode.KeyN],contextMenuGroupId:"me-01",run:function(e){let t=e.getOptions().get(monaco.editor.EditorOption.wordWrap);t="on"==t?"off":"on",e.updateOptions({wordWrap:t})}})}};Object.assign(window,{nrEditor:o});let r={remote:async e=>{switch(e){case"bootstrap5.js":await t.importScript("https://npmcdn.com/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js");break;case"bootstrap5.css":await t.importStyle("https://npmcdn.com/bootstrap@5.3.3/dist/css/bootstrap.min.css");break;case"agGrid":await t.importScript("https://npmcdn.com/ag-grid-enterprise@32.0.2/dist/ag-grid-enterprise.min.js");break;case"echarts":await t.importScript("https://npmcdn.com/echarts@5.5.1/dist/echarts.min.js");break;case"netnrmdEditor":await o.rely();break;case"netnrmd":await t.importStyle("/file/md/netnrmd.css?4.1.0"),await t.importScript("/file/md/netnrmd.js?4.1.0");break;case"asciinema-player":await t.importStyle("https://npmcdn.com/asciinema-player@3.8.0/dist/bundle/asciinema-player.css"),await t.importScript("https://npmcdn.com/asciinema-player@3.8.0/dist/bundle/asciinema-player.min.js");break;case"choices":await t.importStyle("https://npmcdn.com/choices.js@10.2.0/public/assets/styles/choices.min.css"),await t.importScript("https://npmcdn.com/choices.js@10.2.0/public/assets/scripts/choices.min.js");break;case"md5.js":await t.importScript("https://npmcdn.com/blueimp-md5@2.19.0/js/md5.min.js");break;case"hls.js":await t.importScript("https://npmcdn.com/hls.js@1.5.13/dist/hls.min.js");break;case"qrcode.js":await t.importScript("https://npmcdn.com/qrcode@1.5.1/build/qrcode.js");break;case"jsqr.js":await t.importScript("https://npmcdn.com/jsqr@1.4.0/dist/jsQR.js");break;case"terser.js":await t.importScript("https://npmcdn.com/terser@5.31.3/dist/bundle.min.js");break;case"editor-nginx":await t.importScript("/file/ss-editor-nginx.js?202303"),await t.importScript("https://npmcdn.com/nginxbeautifier@1.0.19/nginxbeautifier.js");break;case"js-beautify.js":await t.importScript("https://npmcdn.com/js-beautify@1.15.1/js/lib/beautifier.min.js"),await t.require(["beautifier"],"beautifier");break;case"sql-formatter.js":await t.require(["https://npmcdn.com/sql-formatter@15.3.2/dist/sql-formatter.min.js"],"sqlFormatter");break;case"html2canvas.js":await t.importScript("https://npmcdn.com/html2canvas@1.4.1/dist/html2canvas.min.js");break;case"identicon":await t.importScript("/file/identicon/identicon.min.js?202303"),await t.importScript("https://npmcdn.com/jdenticon@3.3.0/dist/jdenticon.min.js");break;case"svgo.js":window.svgo||Object.assign(window,{svgo:await import("https://npmcdn.com/svgo@3.3.2/dist/svgo.browser.js")});break;case"nsfwjs":await t.importScript("https://npmcdn.com/@tensorflow/tfjs@2.8.6/dist/tf.min.js"),await t.importScript("https://npmcdn.com/nsfwjs@2.4.2/dist/nsfwjs.min.js");break;case"segmentit.js":await t.importScript("https://npmcdn.com/segmentit@2.0.3/dist/umd/segmentit.js");break;case"cropperjs":await t.importStyle("https://npmcdn.com/cropperjs@1.6.2/dist/cropper.min.css"),await t.importScript("https://npmcdn.com/cropperjs@1.6.2/dist/cropper.min.js");break;case"exceljs":await t.importScript("https://npmcdn.com/exceljs@4.4.0/dist/exceljs.min.js");break;case"XLSX":await t.importScript("https://npmcdn.com/xlsx@0.18.5/dist/xlsx.full.min.js");break;case"pdf.js":await t.importScript("https://npmcdn.com/pdfjs-dist@3.11.174/build/pdf.min.js");break;case"jszip.js":await t.importScript("https://npmcdn.com/jszip@3.10.1/dist/jszip.min.js");break;case"bowser.js":await t.importScript("https://npmcdn.com/bowser@2.11.0/es5.js");break;case"swaggerui":await t.importStyle("https://npmcdn.com/swagger-ui-dist@5.17.14/swagger-ui.css"),await t.require(["https://npmcdn.com/swagger-ui-dist@5.17.14/swagger-ui-bundle.js","https://npmcdn.com/swagger-ui-dist@5.17.14/swagger-ui-standalone-preset.js"],"SwaggerUIBundle, SwaggerUIStandalonePreset");break;case"crypto.js":await t.importScript("https://npmcdn.com/crypto-js@4.2.0/crypto-js.js");break;case"jstree":await t.importScript("https://npmcdn.com/jquery@3.7.1/dist/jquery.min.js"),await t.importStyle("https://npmcdn.com/jstree@3.3.16/dist/themes/default/style.min.css"),await t.importStyle("https://npmcdn.com/jstree@3.3.16/dist/themes/default-dark/style.min.css"),await t.importScript("https://npmcdn.com/jstree@3.3.16/dist/jstree.min.js");break;case"pinyin-pro.js":await t.importScript("https://npmcdn.com/pinyin-pro@3.24.1/dist/index.js");break;case"turndown.js":await t.importScript("https://npmcdn.com/turndown@7.2.0/lib/turndown.browser.umd.js")}}};Object.assign(window,{nrcRely:r});let s={tsLoaded:null,rely:async()=>r.remote("echarts"),bind:async(e,a,n)=>{await s.rely(),a=Object.assign({renderer:"svg",backgroundColor:"transparent"},a),null==n&&(n=t.isDark()?"dark":null),e.chart?e.chart.dispose():e.innerHTML="";let o=echarts.init(e,n,{renderer:a.renderer});return o.setOption(a),e.dataset.bind||(e.dataset.bind=!0,window.addEventListener("resize",(()=>{let t=e.chart;t&&t.resize()}))),e.chartOption=a,e.chart=o,o},playTooltip:(e,t)=>{if("true"!=e.dataset.bingPlay){e.dataset.bingPlay="true";let a=-1,n=function(){if(document.body.contains(e)){if(-1==a)a=0;else{let t=e.chart;var o=t.getOption().series[0].data.length;"true"!=e.dataset.playPause&&(t.dispatchAction({type:"downplay",seriesIndex:0,dataIndex:a}),a=(a+1)%o,t.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:a}),t.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:a}))}setTimeout(n,t||5e3)}};e.addEventListener("mouseover",(function(){e.dataset.playPause="true"})),e.addEventListener("mouseout",(function(){e.dataset.playPause="false"})),n()}},setTheme:async(e,t)=>{if(e){let a=e.chart,n=e.chartOption;a&&n&&await s.bind(e,n,t)}},color2:["#2ec7c9","#b6a2de","#5ab1ef","#ffb980","#d87a80","#8d98b3","#e5cf0d","#97b552","#95706d","#dc69aa","#07a2a4","#9a7fd1","#588dd5","#f5994e","#c05050","#59678c","#c9ab00","#7eb00a","#6f5553","#c14089"],color3:["#c1232b","#27727b","#fcce10","#e87c25","#b5c334","#fe8463","#9bca63","#fad860","#f3a43b","#60c0dd","#d7504b","#c6e579","#f4e001","#f0805a","#26c0c0"],color4:["#e01f54","#001852","#f5e8c8","#b8d2c7","#c6b38e","#a4d8c2","#f3d999","#d3758f","#dcc392","#2e4783","#82b6e9","#ff6347","#a092f1","#0a915d","#eaf889","#6699FF","#ff6666","#3cb371","#d5b158","#38b6b6"]};Object.assign(window,{nrECharts:s});let l={tsEditor:null,tsMd:null,tsGrid:null,tsLoadingHtml:'<div class="spinner-border m-3" role="status"><span class="visually-hidden">Loading...</span></div>',tsFailHtml:'<input type="text" readonly class="form-control-plaintext" value="网络错误">',setTheme:function(e){let a=document.documentElement,n="dark"==e?"light":"dark";a.className=a.className.replace(n,e),a.dataset.bsTheme=e,t.saveTheme(e);let o=t.isDark();window.monaco&&(o?monaco.editor.setTheme("vs-dark"):monaco.editor.setTheme("vs")),l.tsMd&&l.tsMd.toggleTheme(o?"dark":"light"),document.querySelectorAll(".nrg-grid").forEach((e=>{o?(e.classList.remove("ag-theme-alpine"),e.classList.add("ag-theme-alpine-dark")):(e.classList.remove("ag-theme-alpine-dark"),e.classList.add("ag-theme-alpine"))})),document.querySelectorAll(".nrg-chart").forEach((e=>{s.setTheme(e)})),document.querySelectorAll(".nrg-tree").forEach((e=>{let t=e.tree;t&&t.set_theme(o?"default-dark":"default")}))},setLoading:(e,t=!1)=>{if(e.disabled=!t,t){e.classList.remove("nrg-loading");let t=e.querySelector(".nrg-loading-wait");t&&t.remove()}else if(!e.classList.contains("nrg-loading")){e.classList.add("nrg-loading");let t=document.createElement("span");t.className="nrg-loading-wait",t.innerHTML='<span class="spinner-border spinner-border-sm"></span>',e.appendChild(t)}},logError:(e,t)=>{null!=t&&l.toast(t),console.debug(e)},setGridColumnLoading:e=>{for(let t=0;t<e.length;t++){let a=e[t];if("#line_number"!=a.field&&1!=a.hide){null==a.cellRenderer&&(a.cellRenderer=e=>void 0===e.value?'<div class="spinner-border"></div>':e.value);break}}},setQuickFilter:(e,t)=>{e.addEventListener("input",(async function(){let e=t.gridApi||t;e&&e.updateGridOptions({quickFilterText:this.value})}))},toast:e=>{null==l.domToastContainer&&(l.domToastContainer=document.createElement("div"),l.domToastContainer.className="toast-container position-fixed bottom-0 end-0 p-4",document.body.appendChild(l.domToastContainer));let t=document.createElement("div");t.innerHTML=`\n<div class="toast-header">\n    <img src="/favicon.ico" class="rounded me-2" height="18">\n    <strong class="me-auto">消息提示</strong>\n    <button type="button" class="btn-close" data-bs-dismiss="toast"></button>\n</div>\n<div class="toast-body">${e}</div>\n`,t.className="toast",l.domToastContainer.appendChild(t);let a=new bootstrap.Toast(t);a.show(),l.domToastContainer.toast=a,t.addEventListener("hidden.bs.toast",(function(e){e.target.remove()}))},domAlert:null,alert:(e,a,n="60em")=>{null==l.domAlert&&(l.domAlert=document.createElement("div"),l.domAlert.innerHTML='\n<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">\n    <div class="modal-content">\n        <div class="modal-header">\n            <h5 class="modal-title"></h5>\n            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n        </div>\n        <div class="modal-body"></div>\n        <div class="modal-footer">\n            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>\n        </div>\n    </div>\n</div>\n            ',l.domAlert.className="modal",document.body.appendChild(l.domAlert),l.domAlert.alert=new bootstrap.Modal(l.domAlert)),l.domAlert.querySelector(".modal-title").innerHTML=a||"消息提示",t.cssvar(l.domAlert,"--bs-modal-width",n);let o=l.domAlert.querySelector(".modal-body");o.innerHTML="";try{e="string"==typeof e?JSON.stringify(JSON.parse(e),null,2):JSON.stringify(e,null,2);let t=document.createElement("pre");t.className="m-0 fs-6",t.style.whiteSpace="pre-wrap",t.innerText=e,o.appendChild(t)}catch(t){o.innerHTML=e}l.domAlert.alert.show()},domConfirm:null,confirm:(e,a,n="30em")=>new Promise((o=>{null==l.domConfirm&&(l.domConfirm=document.createElement("div"),l.domConfirm.innerHTML='\n<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">\n    <div class="modal-content">\n        <div class="modal-header">\n            <h5 class="modal-title"></h5>\n            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n        </div>\n        <div class="modal-body"></div>\n        <div class="modal-footer">\n            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>\n            <button type="button" class="btn btn-primary flag-ok">确定</button>\n        </div>\n    </div>\n</div>\n            ',l.domConfirm.className="modal",document.body.appendChild(l.domConfirm),l.domConfirm.confirm=new bootstrap.Modal(l.domConfirm)),l.domConfirm.querySelector(".modal-title").innerHTML=a||"消息提示",t.cssvar(l.domConfirm,"--bs-modal-width",n),l.domConfirm.querySelector(".modal-body").innerHTML=e;let r=function(){l.domConfirm.removeEventListener("hidden.bs.modal",r),o(!1)};l.domConfirm.addEventListener("hidden.bs.modal",r),l.domConfirm.querySelector(".flag-ok").onclick=()=>{l.domConfirm.removeEventListener("hidden.bs.modal",r),l.domConfirm.confirm.hide(),o(!0)},l.domConfirm.confirm.show()}))};Object.assign(window,{nrApp:l});let d={flagName:"netnr",flagResp:"uuid",flagLibs:"libs",flagSuffix:".md",flagToken:null,flagLocalUsed:!1,flagLocalPath:"/libs/index.json",flagLocalJson:null,flagProxyServer:"https://netnr.zme.ink/api/v1/Proxy/?url=",flagProxyUsed:!0,flagTitle:document.title},c={init:async()=>{isSecureContext&&!window.webpackHotUpdatenetnr&&navigator.serviceWorker.register("/sw.js").then((e=>console.debug("SW registered: ",e))).catch((e=>console.debug("SW failed: ",e))),l.setTheme(t.cookie(".theme")||"light"),await Promise.all([i.e(580),i.e(791)]).then(i.bind(i,791));const e=await i.e(414).then(i.t.bind(i,414,23));Object.assign(window,{bootstrap:e,nrWeb:c,nrVary:d}),n.localforage=await new a({name:"nr-cache"}).init(),n.instanceUser=await new a({name:"nr-user"}).init(),await c.render(),c.bindEvent();let o=(location.hash.length>1?location.hash:location.pathname).substring(1).split("/");""!=o[0]&&(d.flagName=o[0]),null!=o[1]&&""!=o[1]&&(d.flagResp=o[1]),null!=o[2]&&""!=o[2]&&(d.flagLibs=o[2]),"#_local"==location.hash&&(d.flagLocalUsed=!0,await n.setItem("local",d.flagLocalUsed));let r=await n.getItem("local");!0===r&&(d.flagLocalUsed=r,document.querySelector('[data-action="local"]').classList.add("active"));let s=await n.getItem("uuid-token-github");null!=s&&s.length>10&&(d.flagToken=s,document.querySelector('[data-action="token"]').classList.add("active"));let m=await n.getItem("proxy");null!=m&&(d.flagProxyUsed=m),d.flagProxyUsed&&document.querySelector('[data-action="proxy"]').classList.add("active"),document.getElementById("style0").remove(),d.domLayout.classList.remove("invisible"),await c.load()},render:async()=>{let e=document.createElement("div");d.domLayout=e,e.className="invisible",e.innerHTML='\n<div class="container-fluid p-lg-4 pb-lg-0 py-4">\n    <div class="row">\n\n        <div class="col-auto mb-2">\n            <div class="dropdown">\n                <button class="btn btn-outline-success dropdown-toggle" data-bs-toggle="dropdown" data-bs-auto-close="false">\n                    <img class="nrg-img-avatar rounded" style="height:1.3em;width:1.3em;" src="/favicon.ico" >\n                </button>\n                <ul class="nrg-dd-user-info dropdown-menu"></ul>\n            </div>\n        </div>\n\n        <div class="col mb-2">\n            <input class="nrg-txt-filter form-control" type="search" placeholder="silent search.." data-search="" title="silent search.." />\n        </div>\n\n        <div class="col-auto mb-2">\n            <div class="btn-group">\n                <button class="nrg-btn-reload btn btn-outline-success" data-action="reload" title="重新加载">Reload</button>\n                <button type="button" class="btn btn-outline-success dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown">\n                    <span class="visually-hidden">Toggle Dropdown</span>\n                </button>\n                <ul class="nrg-dd-more dropdown-menu">\n                    <li><button class="dropdown-item" data-action="theme">主题 Theme</button></li>\n                    <li><hr class="dropdown-divider"></li>\n                    <li><button class="dropdown-item" data-action="local" title="私有化部署 Privatization deployment">本地 Local</button></li>\n                    <li><button class="dropdown-item" data-action="token">设置 Token</button></li>\n                    <li><button class="dropdown-item" data-action="proxy" title="使用代理 use proxy">代理 Proxy</button></li>\n                    <li><hr class="dropdown-divider"></li>\n                    <li><button class="dropdown-item" data-action="convert" title="转换浏览器导出的 HTML 书签">转换 Convert</button></li>\n                    <li><button class="dropdown-item" data-action="about">关于 About</button></li>\n                </ul>\n            </div>\n        </div>\n        <div class="col-12 position-relative">\n            <div class="nrg-search border rounded d-none position-absolute"></div>\n        </div>        \n    </div>\n    <div class="nrg-view row my-3"></div>\n</div>\n',document.body.appendChild(e),t.readDOM(document.body,"nrg",d)},load:async()=>{l.setLoading(d.domBtnReload),await c.viewUser(),await c.viewLink(),l.setLoading(d.domBtnReload,!0);try{let e=await n.instanceUser.getItem(`${d.flagName}:update-time`);e&&Date.now()-e>6048e5&&(await c.reqUser(d.flagName,!0),await c.reqLibs(d.flagName,d.flagResp,d.flagLibs,!0))}catch(e){}},bindEvent:()=>{document.body.addEventListener("click",(async function(e){let t=e.target;t.dataset.action&&c.triggerAction(t.dataset.action,t)})),d.domTxtFilter.addEventListener("keydown",(function(e){if(["ArrowUp","ArrowDown"].includes(e.code))e.preventDefault(),c.searchArrow(e.code);else if("Enter"==e.key){e.preventDefault();let t=d.domSearch.querySelector("a.active");t&&t.click()}})),d.domTxtFilter.addEventListener("input",(function(e){c.searchLink(this.value.trim())})),document.body.addEventListener("keydown",(function(e){if("INPUT"!=document.activeElement.nodeName)if(e.ctrlKey&&["KeyQ","KeyK"].includes(e.code))e.preventDefault(),d.domTxtFilter.focus(),d.domTxtFilter.dataset.search="",d.domTxtFilter.placeholder=d.domTxtFilter.title,c.searchLink("");else if("Backspace"==e.code)e.preventDefault(),d.domTxtFilter.dataset.search.length&&(d.domTxtFilter.dataset.search=d.domTxtFilter.dataset.search.slice(0,-1)),d.domTxtFilter.placeholder=d.domTxtFilter.dataset.search.length?d.domTxtFilter.dataset.search:d.domTxtFilter.title,c.searchLink(d.domTxtFilter.dataset.search);else if("Enter"==e.key){if(e.preventDefault(),!d.domSearch.classList.contains("d-none")){let e=d.domSearch.querySelector("a.active");e&&e.click()}}else"Escape"==e.code?(e.preventDefault(),d.domTxtFilter.dataset.search.length&&(d.domTxtFilter.dataset.search="",d.domTxtFilter.placeholder=d.domTxtFilter.title,c.searchLink(""))):["ArrowUp","ArrowDown"].includes(e.code)?(e.preventDefault(),d.domTxtFilter.dataset.search.length&&c.searchArrow(e.code)):/^[a-z0-9\.\_\-\/]$/i.test(e.key)&&!e.ctrlKey&&(d.domTxtFilter.value="",document.documentElement.scrollTo(0,0),d.domTxtFilter.dataset.search+=e.key,d.domTxtFilter.placeholder=d.domTxtFilter.dataset.search,c.searchLink(d.domTxtFilter.dataset.search))}))},triggerAction:async(a,o)=>{switch(a){case"theme":l.setTheme(t.isDark()?"light":"dark");break;case"token":null==d.domDialogToken&&(d.domDialogToken=document.createElement("div"),d.domDialogToken.innerHTML='\n<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">\n    <div class="modal-content">\n        <div class="modal-header">\n            <h5 class="modal-title">Token（令牌）</h5>\n            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n        </div>\n        <div class="modal-body">\n            <div>Refresh after pasting</div>\n            <div>Anonymous access is limited (60 per hour)</div>\n            <input class="form-control my-3" placeholder="token" />\n            <div><a target="_blank" href="https://github.com/settings/tokens">https://github.com/settings/tokens</a></div>\n        </div>\n    </div>\n</div>',d.domDialogToken.className="modal",document.body.appendChild(d.domDialogToken),d.domDialogToken.querySelector("input").addEventListener("input",(async function(){let e=d.domDdMore.querySelector('[data-action="token"]');""==this.value.trim()?(e.classList.remove("active"),d.flagToken=null,await n.removeItem("uuid-token-github")):this.value.length>10&&(e.classList.add("active"),d.flagToken=this.value.trim(),await n.setItem("uuid-token-github",this.value.trim()))})),d.bsDialogToken=new bootstrap.Modal(d.domDialogToken)),d.domDialogToken.querySelector("input").value=d.flagToken,d.bsDialogToken.show();break;case"local":{let e=`https://github.com/${d.flagName}/${d.flagResp}`,t=`线上 GitHub (<a href="${e}">${e}</a>)`,a=new URL(d.flagLocalPath,location).href,o=`本地 Local (<a href="${a}">${a}</a>)`,r='<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M448 789.312V0h128v789.312l234.688-234.624L896 640l-384 384-384-384 85.312-85.312L448 789.312z" fill="currentColor"></path></svg>',i=d.flagLocalUsed?`${o}<div class="my-2">${r}</div>${t}`:`${t}<div class="my-2">${r}</div>${o}`;await l.confirm(i,"切换 switch")&&(d.flagLocalUsed=!d.flagLocalUsed,await n.setItem("local",d.flagLocalUsed),d.domDdMore.querySelector('[data-action="local"]').classList.toggle("active"),"#_local"==location.hash&&(location.hash=""),location.reload())}break;case"proxy":d.flagProxyUsed=!d.flagProxyUsed,await n.setItem("proxy",d.flagProxyUsed),d.domDdMore.querySelector('[data-action="proxy"]').classList.toggle("active");break;case"reload":{let e=await n.instanceUser.keys();for(const t of e)t.startsWith(`${d.flagName}:`)&&await n.instanceUser.removeItem(t);await c.load()}break;case"convert":null==d.domDialogConvert&&(d.domDialogConvert=document.createElement("div"),d.domDialogConvert.innerHTML='\n<div class="modal-dialog modal-fullscreen modal-dialog-centered modal-dialog-scrollable">\n    <div class="modal-content">\n        <div class="modal-header">\n            <h5 class="modal-title">Convert HTML bookmarks（转换书签）</h5>\n            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n        </div>\n        <div class="modal-body">\n            <div class="row">\n                <div class="col-lg-6">\n                    <input type="file" class="mb-2 form-control" />\n                    <textarea class="form-control" style="height:calc(100vh - 145px);"></textarea>\n                </div>\n                <div class="col-lg-6">\n                    <div class="nrg-preview overflow-auto border rounded p-3" style="height:calc(100vh - 100px);">preview</div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>',d.domDialogConvert.className="modal",document.body.appendChild(d.domDialogConvert),d.domDialogConvert.querySelector("input").addEventListener("change",(async function(){let t=this.files[0];if(t){try{let a=await e.reader(t),n=[],o=document.createElement("div");o.innerHTML=a,n.push("# "+o.querySelector("h1").innerHTML),c.convertHtml(o,n);let r=n.join("\r\n");d.domDialogConvert.querySelector("textarea").value=r;let s=await i.e(23).then(i.bind(i,23));d.domDialogConvert.querySelector(".nrg-preview").innerHTML=s.parse(r)}catch(e){console.debug(e),l.alert("转换失败")}this.value=""}})),d.domDialogConvert.querySelector("textarea").addEventListener("input",(async function(){let e=await i.e(23).then(i.bind(i,23));d.domDialogConvert.querySelector(".nrg-preview").innerHTML=e.parse(this.value)})),d.bsDialogConvert=new bootstrap.Modal(d.domDialogConvert)),d.bsDialogConvert.show();break;case"about":{let e='\n<div>GitHub: <a href="https://github.com/netnr">https://github.com/netnr</a></div>\n<div>联系打赏: <a href="https://zme.ink">https://zme.ink</a></div>\n<hr/>\n<div class="mt-2">缓存后可离线使用</div>\n<hr/>\n<div>Fork 项目，从浏览器导出书签 HTML，再转换书签为 Markdown，保存到 libs/*.md</div>\n<div>私有化部署，更新索引文件 libs/index.json，页面再启用 本地 Local</div>\n<hr/>\n<div>uuid.fun 于 2028-11-09 8:00 到期，计划不再续费，启用子域名，<a href="https://uu.zme.ink">https://uu.zme.ink</a></div>\n';l.alert(e,"About 关于")}}},reqUser:async(e,t)=>{let a=`https://api.github.com/users/${e}`,o=`${e}:${a}`,r=await n.instanceUser.getItem(o);return(null==r||t)&&(r=await c.reqServer(a),r&&(await n.instanceUser.setItem(o,r),await n.instanceUser.setItem(`${e}:update-time`,Date.now()))),r},reqLibs:async(e,t,a,o)=>{let r=`https://api.github.com/repos/${e}/${t}/contents/${a}`,i=`${e}:${r}`,s=await n.instanceUser.getItem(i);return(null==s||o)&&(s=await c.reqServer(r),s&&await n.instanceUser.setItem(i,s)),s},reqRaw:async e=>{let a=`${d.flagName}:${e}`,o=await n.instanceUser.getItem(a);return null==o&&(o=await c.reqServer(`${e}?_${t.random()}`,{type:"text"}),o&&await n.instanceUser.setItem(a,o)),o},convertHtml:(e,t)=>{for(let a=0;a<e.children.length;a++){let n=e.children[a];switch(n.nodeName){case"H3":t.push(""),t.push("### "+n.innerHTML);break;case"DL":case"P":c.convertHtml(n,t);break;case"DT":if(1==n.children.length){let e=n.querySelector("a");t.push("- ["+e.innerHTML.replace(/`/g,"\\`")+"]("+e.href+")")}else c.convertHtml(n,t)}}},viewUser:async()=>{let e;if(d.flagLocalUsed?(d.flagLocalJson=await c.reqServer(d.flagLocalPath)||{},e=d.flagLocalJson.user||{}):e=await c.reqUser(d.flagName),e){d.domImgAvatar.onerror=function(){d.domImgAvatar.src="/favicon.ico",d.domImgAvatar.onerror=!1},d.domImgAvatar.src=e.avatar_url;let t=null==e.name?e.login:`${e.login} (${e.name})`,a=null==e.bio?"":`<li><span class="dropdown-item-text" title="bio">${e.bio}</span></li>`,n=null==e.company?"":`<li><span class="dropdown-item-text" title="company">${e.company}</span></li>`,o=null==e.location?"":`<li><span class="dropdown-item-text" title="location">${e.location}</span></li>`,r=null==e.blog?"":`<li><a class="dropdown-item" title="blog" href="${e.blog}">${e.blog}</a></li>`;d.domDdUserInfo.innerHTML=`<li><a class="dropdown-item" title="name" href="https://github.com/${e.login}">${t}</a></li>\n            ${a}<li><hr class="dropdown-divider"></li>${n}${o}${r}\n            `,document.title=`${e.login} - ${d.flagTitle}`}},viewLink:async()=>{let e;if(e=d.flagLocalUsed?d.flagLocalJson.libs||[]:await c.reqLibs(d.flagName,d.flagResp,d.flagLibs),e){let t=[],a=0;e.forEach((e=>{if("file"==e.type&&e.name.endsWith(d.flagSuffix)){let n=e.name.substring(0,e.name.length-d.flagSuffix.length);a++,t.push(`\n                    <div class="accordion-item">\n                        <h2 class="accordion-header">\n                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-${a}">${n}</button>\n                        </h2>\n                        <div id="collapse-${a}" class="accordion-collapse collapse show">\n                            <div class="accordion-body">${l.tsLoadingHtml}</div>\n                        </div>\n                    </div>\n                    `)}})),d.domView.innerHTML=`<div class="accordion">${t.join("")}</div>`,a=0;for(const t of e)if("file"==t.type&&t.name.endsWith(d.flagSuffix)){a++;let e=d.domView.querySelector(`#collapse-${a}`).children[0],n=await c.reqRaw(t.download_url);if(n){let t=await i.e(23).then(i.bind(i,23));e.innerHTML=t.parse(n)}else e.innerHTML=l.tsFailHtml}d.domView.dataset.ended=!0}else d.domView.innerHTML=`<div class="col-12">${l.tsFailHtml}</div>`},searchLink:e=>{if(d.domView.dataset.ended){let t=[];if(""!=e.trim()){e=e.toLowerCase();let a=d.domView.querySelectorAll("a");for(let n=0;n<a.length;n++){const o=a[n];if(`${o.href},${o.innerText},${o.title||""}`.toLowerCase().includes(e)&&(t.push(`<a class="d-flex px-3 py-2 border-top opacity-75" href="${o.href}"><span class="w-75 text-truncate">${o.href}</span><span class="w-25 text-truncate">${o.innerText}</span></a>`),t.length>7))break}}d.domSearch.innerHTML=t.join(""),t.length?(d.domSearch.classList.remove("d-none"),d.domSearch.querySelector("a").classList.add("active")):d.domSearch.classList.add("d-none")}},searchArrow:e=>{if(!d.domSearch.classList.contains("d-none")){let t=d.domSearch.querySelector("a.active"),a="ArrowDown"==e?t.nextElementSibling:t.previousElementSibling;a&&(t.classList.remove("active"),a.classList.add("active"))}},reqServer:async(e,a)=>{a=a||{},null!=d.flagToken&&d.flagToken.length>10&&!e.includes("githubusercontent")&&(a.headers=a.headers||{},a.headers.authorization=`token ${d.flagToken}`),d.flagProxyUsed&&!d.flagLocalUsed&&(e=`${d.flagProxyServer}${encodeURIComponent(e)}`);let n=await t.fetch(e,a);if(n.error)l.logError(n.error,"网络错误");else if(0==n.resp.ok)403==n.resp.status&&l.toast("请设置 Token");else if(n.resp.ok&&n.result)return n.result}};i(747),i(204),"loading"==document.readyState?document.addEventListener("DOMContentLoaded",c.init):c.init()})()})();